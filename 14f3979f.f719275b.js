(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{101:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var i=n(2),a=n(6),r=(n(0),n(145)),l={},o={id:"cf-entity-scaling",isDocsHomePage:!1,title:"cf-entity-scaling",description:"Cloud Foundry Scaling - How Stratos Handles Large Lists",source:"@site/docs/cf-entity-scaling.md",permalink:"/docs/cf-entity-scaling",editUrl:"https://github.com/cloudfoundry/stratos/edit/master/website/docs/cf-entity-scaling.md"},c=[{value:"Protecting Stratos from Large Collections",id:"protecting-stratos-from-large-collections",children:[]},{value:"Applicable Lists",id:"applicable-lists",children:[]},{value:"Determining the List Limit",id:"determining-the-list-limit",children:[]},{value:"Fetch All feature",id:"fetch-all-feature",children:[]},{value:"Configuration",id:"configuration",children:[]}],s={rightToc:c};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"cloud-foundry-scaling---how-stratos-handles-large-lists"},"Cloud Foundry Scaling - How Stratos Handles Large Lists"),Object(r.b)("p",null,"Stratos presents collections of entities via the Stratos list component. The list component presents the collection in a paginated, sortable and searchable way in either a set of cards or a table.\nIn order to achieve this, due to the limitations of the APIs used, the list may fetch all entities (as opposed to fetching entities for the visible page only) and paginate, sort and search locally."),Object(r.b)("h2",{id:"protecting-stratos-from-large-collections"},"Protecting Stratos from Large Collections"),Object(r.b)("p",null,"In some cases the number of entities in a collection can be incredibly high. Stratos can decide to not fetch them all in order to protect the CF from\na substantial number of requests. To do this the first page is fetched and the total number of entities is checked against a limit. If under\nthe limit the remaining pages are asynchronously fetched. If over then the remaining pages are ignored and the user is informed that the list could not fetch all entities."),Object(r.b)("p",null,"Depending on the list, the user can then try to filter the collection such that the number of entities is below the limit. Depending on configuration\nthe user also has the option to fetch all entities regardless of the limit."),Object(r.b)("h2",{id:"applicable-lists"},"Applicable Lists"),Object(r.b)("p",null,"Currently, in 3.1.0, this large collection protection is only applicable to the following lists"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Application Wall"),Object(r.b)("li",{parentName:"ul"},"Marketplace (Services)"),Object(r.b)("li",{parentName:"ul"},"Services (Service & User Provided Service Instances)"),Object(r.b)("li",{parentName:"ul"},"CF, Organisation and Space Users"),Object(r.b)("li",{parentName:"ul"},"CF Routes")),Object(r.b)("p",null,"In the future we hope to expand this to all lists."),Object(r.b)("h2",{id:"determining-the-list-limit"},"Determining the List Limit"),Object(r.b)("p",null,"The limit at which we won't fetch all entities is determined, in least important to most important order, by"),Object(r.b)("p",null,"1) The global CF default - 600\n2) The Jetstream override for all lists - by default not set"),Object(r.b)("p",null,"In the future we hope to allow each end user of Stratos to determine their own limit (if they have the correct permissions)."),Object(r.b)("h2",{id:"fetch-all-feature"},"Fetch All feature"),Object(r.b)("p",null,"If the list hits the limit the user will be presented with a button to ",Object(r.b)("inlineCode",{parentName:"p"},"Fetch All")," entities. Clicking this button ensures the list reverts\nback as if there were no limit and thus fetching all entities. This feature is disabled by default and can be enabled by a Jetstream override."),Object(r.b)("h2",{id:"configuration"},"Configuration"),Object(r.b)("p",null,"The Jetstream overrides can be set via environment variable, or if in helm, as values."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Environment Variable"),Object(r.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Helm Value"),Object(r.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Description"),Object(r.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Default"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"UI_LIST_MAX_SIZE")),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"console.ui.listMaxSize")),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),"Override the default maximum number of entities that a configured list can fetch. When a list meets this amount additional pages are not fetched"),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"UI_LIST_ALLOW_LOAD_MAXED")),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"console.ui.listAllowLoadMaxed")),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),"If the maximum list size is met give the user the option to fetch all results"),Object(r.b)("td",Object(i.a)({parentName:"tr"},{align:null}),"false")))))}b.isMDXComponent=!0},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n(0),a=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),b=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=b(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=b(n),p=i,h=u["".concat(l,".").concat(p)]||u[p]||d[p]||r;return n?a.a.createElement(h,o(o({ref:t},s),{},{components:n})):a.a.createElement(h,o({ref:t},s))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=p;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var s=2;s<r;s++)l[s]=n[s];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);