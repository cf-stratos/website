(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{212:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var r=n(2),o=n(6),a=(n(0),n(355)),i={title:"Configuring User Endpoints",sidebar_label:"Configuring User Endpoints"},l={unversionedId:"advanced/user-endpoints",id:"advanced/user-endpoints",isDocsHomePage:!1,title:"Configuring User Endpoints",description:"Stratos provides a way for users to create endpoints without the need to be an administrator.",source:"@site/docs/advanced/user-endpoints.md",permalink:"/docs/next/advanced/user-endpoints",editUrl:"https://github.com/cloudfoundry/stratos/edit/master/website/docs/advanced/user-endpoints.md",version:"next",sidebar_label:"Configuring User Endpoints",sidebar:"docs",previous:{title:"Configuring Single Sign On",permalink:"/docs/next/advanced/sso"},next:{title:"Contributing",permalink:"/docs/next/developer/contributing"}},s=[{value:"Set up",id:"set-up",children:[]},{value:"Environment variable",id:"environment-variable",children:[]},{value:"Adding scopes to the UAA client",id:"adding-scopes-to-the-uaa-client",children:[]}],c={rightToc:s};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Stratos provides a way for users to create endpoints without the need to be an administrator."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"Note: Admin endpoint-ID's are generated through a SHA-1 encryption of the URL. Personal endpoints will differ in their ID, by using the URL + user-ID for encryption. This should pose no problem in the usual Stratos workflow, but if you depend on the ID to be based solely on the URL, then use this feature with caution.")),Object(a.b)("h2",{id:"set-up"},"Set up"),Object(a.b)("p",null,"In order to enable User Endpoints support in Stratos:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"The environment variable ",Object(a.b)("inlineCode",{parentName:"li"},"USER_ENDPOINTS_ENABLED")," or helm chart value ",Object(a.b)("inlineCode",{parentName:"li"},"console.userEndpointsEnabled")," must be set"),Object(a.b)("li",{parentName:"ol"},"The UAA client used by Stratos needs an additional scope ",Object(a.b)("inlineCode",{parentName:"li"},"stratos.endpointadmin")),Object(a.b)("li",{parentName:"ol"},"Users need to have the ",Object(a.b)("inlineCode",{parentName:"li"},"stratos.endpointadmin")," group attached to them")),Object(a.b)("p",null,"Once all steps have been completed, user within the ",Object(a.b)("inlineCode",{parentName:"p"},"stratos.endpointadmin")," group are allowed to create personal user endpoints. Endpoints created that way are only visible to their respective user and all admins. Admins will be able to create personal user endpoints after step 1 has been completed."),Object(a.b)("h2",{id:"environment-variable"},"Environment variable"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"USER_ENDPOINTS_ENABLED")," or helm chart value ",Object(a.b)("inlineCode",{parentName:"p"},"console.userEndpointsEnabled")," can be set to three different states:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"disabled")," (default) will disable this feature. Neither admins nor users will see user endpoints."),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"admin_only")," will hide user endpoints from users. Admins can create and see all user endpoints."),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"enabled")," will allow users within the ",Object(a.b)("inlineCode",{parentName:"li"},"stratos.endpointadmin")," group and admins to create personal user endpoints. These endpoints will only be visible to them or admins.")),Object(a.b)("h2",{id:"adding-scopes-to-the-uaa-client"},"Adding scopes to the UAA client"),Object(a.b)("p",null,"To add the scope to a client, modify the following ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cloudfoundry/cf-uaac"}),"UAA CLI")," command:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'uaac client update CLIENT_NAME --scope "OTHER_SCOPES stratos.endpointadmin"\n')),Object(a.b)("p",null,"Replace ",Object(a.b)("inlineCode",{parentName:"p"},"CLIENT_NAME")," with the used client and ",Object(a.b)("inlineCode",{parentName:"p"},"OTHER_SCOPES")," with the current configured scopes."),Object(a.b)("p",null,"To add the group and add users to it, use:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"uaac group add stratos.endpointadmin\nuaac member add stratos.endpointadmin USER_NAME\n")))}d.isMDXComponent=!0},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),d=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),b=r,m=p["".concat(i,".").concat(b)]||p[b]||u[b]||a;return n?o.a.createElement(m,l(l({ref:t},c),{},{components:n})):o.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);