<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">Stratos Installation | STRATOS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Stratos Installation | STRATOS"><meta data-react-helmet="true" name="description" content="Stratos is an Open Source Web-based Management console for Cloud Foundry. It allows users and administrators to both manage applications running in the Cloud Foundry cluster and perform cluster management tasks."><meta data-react-helmet="true" property="og:description" content="Stratos is an Open Source Web-based Management console for Cloud Foundry. It allows users and administrators to both manage applications running in the Cloud Foundry cluster and perform cluster management tasks."><meta data-react-helmet="true" property="og:url" content="https://stratos.app/docs/deploy/kubernetes/helm-installation"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://stratos.app/docs/deploy/kubernetes/helm-installation"><link rel="stylesheet" href="/styles.d4a034a3.css">
<link rel="preload" href="/styles.d3be2d04.js" as="script">
<link rel="preload" href="/runtime~main.4575875f.js" as="script">
<link rel="preload" href="/main.777ea05f.js" as="script">
<link rel="preload" href="/1.222372fe.js" as="script">
<link rel="preload" href="/2.34eb096d.js" as="script">
<link rel="preload" href="/44.c6ce18b1.js" as="script">
<link rel="preload" href="/45.0e0f5b82.js" as="script">
<link rel="preload" href="/20ac7829.07547941.js" as="script">
<link rel="preload" href="/17896441.836a2f96.js" as="script">
<link rel="preload" href="/301a1e3d.f3607179.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview">Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Deploying Stratos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/deploy-overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cloud Foundry</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deploy/cloud-foundry">Deploy on Cloud Foundry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/deploy/cloud-foundry/db-migration">Database service bindings</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/kubernetes">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/deploy/kubernetes/helm-installation">Deploy using Helm</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/all-in-one">Docker All-in-One</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/access">Accessing Stratos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/invite-user-guide">Configuring User Invites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/sso">Configuring Single Sign On</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing to Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/contribution/contributing">Contributing to Stratos</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/developers/developers-guide">Stratos Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/developers/developers-guide-env-tech">Dev Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/developers/developers-guide-e2e-tests">E2E Tests</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extending Stratos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/customization/customizing">Customizing Stratos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/theming">Theming Stratos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/frontend">Frontend Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/backend">Backend Plugins</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Stratos Installation</h1></header><div class="markdown"><p>Stratos is an Open Source Web-based Management console for Cloud Foundry. It allows users and administrators to both manage applications running in the Cloud Foundry cluster and perform cluster management tasks.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>Stratos can be installed to a Kubernetes cluster using Helm. Either Helm 2 or Helm 3 can be used, although we recommend using the newer Helm 3 version.</p><p>Ensure the <a href="https://github.com/helm/helm" target="_blank" rel="noopener noreferrer">Helm</a> client and <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener noreferrer">kubectl</a> CLIs are installed. If you are using Helm 2, ensure you&#x27;ve initialized Tiller into your cluster with the appropriate
Service Account.</p><p>The Helm chart is published to the Stratos Helm repository.</p><p>You will need to have the Stratos Helm repository added to your Helm setup, if you do not, run:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add stratos https://cloudfoundry.github.io/stratos</span></div></div></div></div></div><p>Check the repository was successfully added by searching for the <code>console</code>, for example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm search repo console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                CHART VERSION   APP VERSION DESCRIPTION                                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stratos/console     3.2.0           3.2.0       A Helm chart for deploying Stratos UI Console</span></div></div></div></div></div><blockquote><p>Note: Version numbers will depend on the version of Stratos available from the Helm repository</p></blockquote><blockquote><p>Note: Commands shown in this document are for Helm version 3. For Helm version 2, when installing, instead of supplying the name via the <code>--name</code> flag, it is supplied as the first argument, before the chart name.</p></blockquote><p>To install Stratos:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console</span></div></div></div></div></div><blockquote><p><strong>Note</strong>: The first <code>kubectl</code> command will create a namespace for Stratos. With Helm 3 you must create a namespace before installing.
We recommend installing Stratos into a separate namespace.</p></blockquote><blockquote><p><strong>Note</strong>: This assumes that a storage class exists in the Kubernetes cluster that has been marked as <code>default</code>. If no such storage class exists, a specific storage class needs to be specified, please see the following section <em>Specifying a custom Storage Class</em>. </p></blockquote><blockquote><p>You can change the namespace (--namespace) and the release name to values of your choice.</p></blockquote><p>This will create a Stratos instance named <code>my-console</code> in a namespace called <code>console</code> in your Kubernetes cluster.</p><p>After the install, you should be able to access the Console in a web browser by following <a href="#accessing-the-console">the instructions</a> below.</p><p>Advanced installation topics are covered in the the <a href="#advanced-topics">Advanced Topics</a> section below.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="helm-chart-configuration"></a>Helm Chart Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#helm-chart-configuration" title="Direct link to heading">#</a></h1><p>The following table lists the configurable parameters of the Stratos Helm chart and their default values.</p><table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>imagePullPolicy</td><td>Image pull policy</td><td>IfNotPresent</td></tr><tr><td>console.sessionStoreSecret</td><td>Secret to use when encrypting session tokens</td><td>auto-generated random value</td></tr><tr><td>console.ssoLogin</td><td>Whether to enable SSO Login and use the UAA Login UI instead of the built-in one</td><td>false</td></tr><tr><td>console.backendLogLevel</td><td>Log level for backend (info, debug)</td><td>info</td></tr><tr><td>console.service.externalIPs</td><td>External IPs to add to the console service</td><td>[]</td></tr><tr><td>console.service.loadBalancerIP</td><td>IP address to assign to the load balancer for the metrics service (if supported)</td><td></td></tr><tr><td>console.service.loadBalancerSourceRanges</td><td>List of IP CIDRs allowed access to load balancer (if supported)</td><td>[]</td></tr><tr><td>console.service.type</td><td>Service type for the console (ClusterIP, NodePort, LoadBalancer, ExternalName etc)</td><td>ClusterIP</td></tr><tr><td>console.service.servicePort</td><td>Service port for the console service</td><td>443</td></tr><tr><td>console.service.externalName</td><td>External name for the console service when service type is ExternalName</td><td></td></tr><tr><td>console.service.nodePort</td><td>Node port to use for the console service when service type is NodePort or LoadBalancer</td><td></td></tr><tr><td>console.ingress.enabled</td><td>Enable ingress for the console service</td><td>false</td></tr><tr><td>console.ingress.host</td><td>Host for the ingress resource</td><td></td></tr><tr><td>console.ingress.secretName</td><td>Name of an existing secret containing the TLS certificate for ingress</td><td></td></tr><tr><td>console.service.http.enabled</td><td>Enabled HTTP access to the console service (as well as HTTPS)</td><td>false</td></tr><tr><td>console.service.http.servicePort</td><td>Service port for HTTP access to the console service when enabled</td><td>80</td></tr><tr><td>console.service.http.nodePort</td><td>Node port for HTTP access to the console service (as well as HTTPS)</td><td></td></tr><tr><td>console.templatesConfigMapName</td><td>Name of config map that provides the template files for user invitation emails</td><td></td></tr><tr><td>console.userInviteSubject</td><td>Email subject of the user invitation message</td><td></td></tr><tr><td>console.techPreview</td><td>Enable/disable Tech Preview features</td><td>false</td></tr><tr><td>console.ui.listMaxSize</td><td>Override the default maximum number of entities that a configured list can fetch. When a list meets this amount additional pages are not fetched</td><td></td></tr><tr><td>console.ui.listAllowLoadMaxed</td><td>If the maximum list size is met give the user the option to fetch all results</td><td>false</td></tr><tr><td>console.localAdminPassword</td><td>Use local admin user instead of UAA - set to a password to enable</td><td></td></tr><tr><td>console.tlsSecretName</td><td>Secret containing TLS certificate to use for the Console</td><td></td></tr><tr><td>console.mariadb.external</td><td>Use an external database instead of the built-in MariaDB</td><td>false</td></tr><tr><td>console.mariadb.database</td><td>Name of the database to use</td><td>console</td></tr><tr><td>console.mariadb.user</td><td>Name of the user for accessing the database</td><td>console</td></tr><tr><td>console.mariadb.userPassword</td><td>Password of the user for accessing the database. Leave blank for the built-in database to generate a random password</td><td></td></tr><tr><td>console.mariadb.rootPassword</td><td>Password of the root user for accessing the database. Leave blank for the built-in database to generate a random password</td><td></td></tr><tr><td>console.mariadb.host</td><td>Hostname of the database when using an external db</td><td></td></tr><tr><td>console.mariadb.port</td><td>Port of the database when using an external db</td><td>3306</td></tr><tr><td>console.mariadb.tls</td><td>TLS mode when connecting to database (true, false, skip-verify, preferred)</td><td>false</td></tr><tr><td>uaa.endpoint</td><td>URL of the UAA endpoint to authenticate with</td><td></td></tr><tr><td>uaa.consoleClient</td><td>Client to use when authenticating with the UAA</td><td>cf</td></tr><tr><td>uaa.consoleClientSecret</td><td>Client secret to use when authenticating with the UAA</td><td></td></tr><tr><td>uaa.consoleAdminIdentifier</td><td>Scope that identifies an admin user of Stratos (e.g. cloud_controller.admin</td><td></td></tr><tr><td>uaa.skipSSLValidation</td><td>Skip SSL validation when when authenticating with the UAA</td><td>false</td></tr><tr><td>env.SMTP_AUTH</td><td>Authenticate against the SMTP server using AUTH command when Sending User Invite emails</td><td>false</td></tr><tr><td>env.SMTP_FROM_ADDRESS</td><td>From email address to use when Sending User Invite emails</td><td></td></tr><tr><td>env.SMTP_USER</td><td>User name to use for authentication when Sending User Invite emails</td><td></td></tr><tr><td>env.SMTP_PASSWORD</td><td>Password to use for authentication when Sending User Invite emails</td><td></td></tr><tr><td>env.SMTP_HOST</td><td>Server host address to use for authentication when Sending User Invite emails</td><td></td></tr><tr><td>env.SMTP_PORT</td><td>Server port to use for authentication when Sending User Invite emails</td><td></td></tr><tr><td>kube.auth</td><td>Set to &quot;rbac&quot; if the Kubernetes cluster supports Role-based access control</td><td>&quot;rbac&quot;</td></tr><tr><td>kube.organization</td><td>Registry organization to use when pulling images</td><td></td></tr><tr><td>kube.registry.hostname</td><td>Hostname of registry to use when pulling images</td><td>docker.io</td></tr><tr><td>kube.registry.username</td><td>Username to use when pulling images from the registry</td><td></td></tr><tr><td>kube.registry.password</td><td>Password to use when pulling images from the registry</td><td></td></tr><tr><td>console.podAnnotations</td><td>Annotations to be added to all pod resources</td><td></td></tr><tr><td>console.podExtraLabels</td><td>Additional labels to be added to all pod resources</td><td></td></tr><tr><td>console.statefulSetAnnotations</td><td>Annotations to be added to all statefulset resources</td><td></td></tr><tr><td>console.statefulSetExtraLabels</td><td>Additional labels to be added to all statefulset resources</td><td></td></tr><tr><td>console.deploymentAnnotations</td><td>Annotations to be added to all deployment resources</td><td></td></tr><tr><td>console.deploymentExtraLabels</td><td>Additional labels to be added to all deployment resources</td><td></td></tr><tr><td>console.jobAnnotations</td><td>Annotations to be added to all job resources</td><td></td></tr><tr><td>console.jobExtraLabels</td><td>Additional labels to be added to all job resources</td><td></td></tr><tr><td>console.service.annotations</td><td>Annotations to be added to all service resources</td><td></td></tr><tr><td>console.service.extraLabels</td><td>Additional labels to be added to all service resources</td><td></td></tr><tr><td>console.service.ingress.annotations</td><td>Annotations to be added to the ingress resource</td><td></td></tr><tr><td>console.service.ingress.extraLabels</td><td>Additional labels to be added to the ingress resource</td><td></td></tr><tr><td>console.nodeSelector</td><td>Node selectors to use for the console Pod</td><td></td></tr><tr><td>mariadb.nodeSelector</td><td>Node selectors to use for the database Pod</td><td></td></tr><tr><td>configInit.nodeSelector</td><td>Node selectors to use for the configuration Pod</td><td></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="accessing-the-console"></a>Accessing the Console<a aria-hidden="true" tabindex="-1" class="hash-link" href="#accessing-the-console" title="Direct link to heading">#</a></h2><p>To check the status of the instance use the following command:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm status my-console</span></div></div></div></div></div><blockquote><p>Note: Replace <code>my-console</code> with the value you used for the <code>name</code> parameter, or if you did not provide one, use the <code>helm list</code> command to find the release name that was automatically generated for you.</p></blockquote><p>The console is exposed via an HTTPS service - <code>RELEASE-NAME-ui-ext</code> (where RELEASE-NAME is the name used for the <code>name</code> parameter when installing). You can find the details of this service with:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get services -n NAMESPACE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)         AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my-console-mariadb   ClusterIP   10.105.216.25   &lt;none&gt;        3306/TCP        60s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">my-console-ui-ext    NodePort    10.109.207.70   &lt;none&gt;        443:31067/TCP   60s</span></div></div></div></div></div><blockquote><p>In this example, Stratos has been deployed withe the service configured as <code>NodePort</code>.</p></blockquote><p>The URL you use for accessing Stratos will depend on the service configuration and the environment that you have used.</p><blockquote><p>Note: If you did not provide a certificate when installing, Stratos will use a self-signed certificate, so you will see a certificate warning which you access Stratos in a browser.</p></blockquote><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="upgrading-your-deployment"></a>Upgrading your deployment<a aria-hidden="true" tabindex="-1" class="hash-link" href="#upgrading-your-deployment" title="Direct link to heading">#</a></h1><p>To upgrade your instance when using the Helm repository, fetch any updates to the repository:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update</span></div></div></div></div></div><p>To update an instance, the following assumes your instance is called <code>my-console</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade my-console stratos/console</span></div></div></div></div></div><p>After the upgrade, perform a <code>helm list</code> to ensure your console is the latest version.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="uninstalling"></a>Uninstalling<a aria-hidden="true" tabindex="-1" class="hash-link" href="#uninstalling" title="Direct link to heading">#</a></h2><p>To uninstall Stratos, delete the Helm release and also delete the Kubernetes namespace:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm delete my-console --purge</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete namespace console</span></div></div></div></div></div><blockquote><p>Note: Stratos creates secrets in the namespace as part of an initialization job. These are not managed by Helm, so make sure you
delete the namespace to remove these secrets. </p></blockquote><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="advanced-topics"></a>Advanced Topics<a aria-hidden="true" tabindex="-1" class="hash-link" href="#advanced-topics" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-a-load-balancer"></a>Using a Load Balancer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-a-load-balancer" title="Direct link to heading">#</a></h2><p>If your Kubernetes deployment supports automatic configuration of a load balancer (e.g. Google Container Engine), specify the parameters <code>console.service.type=LoadBalancer</code> when installing.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console --set console.service.type=LoadBalancer</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-an-ingress-controller"></a>Using an Ingress Controller<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-an-ingress-controller" title="Direct link to heading">#</a></h2><p>If your Kubernetes Cluster supports Ingress, you can expose Stratos through Ingress by supplying the appropriate ingress configuration when installing.</p><p>This configuration is described below:</p><table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>console.service.ingress.enabled</td><td>Enables ingress</td><td>false</td></tr><tr><td>console.service.ingress.annotations</td><td>Annotations to be added to the ingress resource.</td><td>{}</td></tr><tr><td>console.service.ingress.extraLabels</td><td>Additional labels to be added to the ingress resource.</td><td>{}</td></tr><tr><td>console.service.ingress.host</td><td>The host name that will be used for the Stratos service.</td><td></td></tr><tr><td>console.service.ingress.secretName</td><td>The existing TLS secret that contains the certificate for ingress.</td><td></td></tr></tbody></table><p>You must provide <code>console.service.ingress.host</code> when enabling ingress.</p><p>By default a certificate will be generated for TLS. You can provide your own certificate by creating a secret and specifying this with <code>console.service.ingress.secretName</code>.</p><blockquote><p>Note: If you do not supply <code>console.service.ingress.host</code> but do supply <code>env.DOMAIN</code> then the host <code>console.[env.DOMAIN]</code> will be used.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deploying-from-a-private-image-repository"></a>Deploying from a Private Image Repository<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploying-from-a-private-image-repository" title="Direct link to heading">#</a></h2><p>If the images used by the chart are hosted in a private repository, the following needs to be specified. Save the following to a file called <code>private_overrides.yaml</code>. Replace <code>REGISTRY USER PASSSWORD</code>, <code>REGISTRY USERNAME</code>, <code>REGISTRY URL</code> with the appropriate values. <code>USER EMAIL</code> can be left blank.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kube:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  registry:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    password: &lt;REGISTRY USER PASSWORD&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    username: &lt;REGISTRY USERNAME&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    hostname: &lt;REGISTRY URL&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    email: &lt;USER EMAIL or leave blank&gt;</span></div></div></div></div></div><p>Deploy with:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console -f private_overrides.yaml</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deploying-with-your-own-tls-certificates"></a>Deploying with your own TLS certificates<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploying-with-your-own-tls-certificates" title="Direct link to heading">#</a></h2><p>By default the console will generate self-signed certificates for demo purposes. To configure Stratos to use your provided TLS certificate, create a TLS secret in the namespace you are installing into and specify this secret name using the helm chart value <code>console.tlsSecretName</code> when installing.</p><p>Assuming you have your certificate and key in the files <code>tls.crt</code> and <code>tls.key</code>, create the secret with:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create secret tls -n NAMESPACE stratos-tls-secret --cert=tls.crt --key=tls.key</span></div></div></div></div></div><blockquote><p>Where <code>NAMESPACE</code> is the namespace you are installing Stratos into - you will need to manually create the namespace first if it does not already exist.</p></blockquote><p>You can now install Stratos with:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console --set console.tlsSecretName=stratos-tls-secret</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-an-external-database"></a>Using an External Database<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-an-external-database" title="Direct link to heading">#</a></h2><p>You can choose to use Stratos with an external database, rather than deploying a single-node MariaDB instance as part of the Helm install.</p><p>To do so, specify <code>console.mariabdb.external=true</code> when deploying.</p><p>You will also need to specify:</p><ul><li><code>console.mariadb.host</code> as the hostname of the external MariaDB database server</li><li><code>console.mariadb.port</code> as the port of the external MariaDB database server (defaults to 3306)</li><li><code>console.mariadb.tls</code> as the TLS mode (default is <code>false,</code> use <code>true</code> for a TLS connection to the database server)</li><li><code>console.mariadb.database</code> as the name of the database</li><li><code>console.mariadb.user</code> as the username to connect to the database server</li><li><code>console.mariadb.userPassword</code> as the password to connect to the database server</li></ul><p>When using an external database server, Stratos expects that you have:</p><ul><li>Created a user that will be used to access the database</li><li>Created a database for the Stratos tables and data</li><li>Granted appropriate permissions so that the user can access the database</li></ul><blockquote><p>Note: When using a database from a Cloud provider, ensure that the username is correct - in some cases this will be <code>username@servername</code> - check the provided connection documentation</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="specifying-uaa-configuration"></a>Specifying UAA configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#specifying-uaa-configuration" title="Direct link to heading">#</a></h2><p>When deploying with SCF, the <code>scf-config-values.yaml</code> (see <a href="https://github.com/SUSE/scf/wiki/How-to-Install-SCF#configuring-the-deployment" target="_blank" rel="noopener noreferrer">SCF Wiki link</a>) can be supplied when installing Stratos.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console -f scf-config-values.yaml</span></div></div></div></div></div><p>UAA configuration can be specified by providing the following configuration.</p><p>Create a yaml file with the content below and and update according to your environment and save to a file called <code>uaa-config.yaml</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">uaa:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  endpoint: https://uaa.cf-dev.io:2793</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  consoleClient:  cf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  consoleClientSecret: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  consoleAdminIdentifier: cloud_controller.admin </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  skipSSLValidation: false</span></div></div></div></div></div><p>To install Stratos with the above specified configuration:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console -f uaa-config.yaml</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configuring-a-local-user-account"></a>Configuring a local user account<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuring-a-local-user-account" title="Direct link to heading">#</a></h2><p>This allows for deployment without a UAA. To enable the local user account, supply a password for the local user in the deployment command, as follows. All other steps for each deployment method should be followed as in the preceding sections above.</p><p>To deploy using our Helm repository:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console --set console.localAdminPassword=&lt;password&gt;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="specifying-annotations-and-labels"></a>Specifying Annotations and Labels<a aria-hidden="true" tabindex="-1" class="hash-link" href="#specifying-annotations-and-labels" title="Direct link to heading">#</a></h2><p>In some scenarios it is useful to be able to add custom annotations and/or labels to the Kubernetes resources that the Stratos Helm chart creates.</p><p>The Stratos Helm chart exposes a number of Helm chart values that cabe specified in order to do this - they are:</p><table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>console.podAnnotations</td><td>Annotations to be added to all pod resources</td><td></td></tr><tr><td>console.podExtraLabels</td><td>Additional labels to be added to all pod resources</td><td></td></tr><tr><td>console.statefulSetAnnotations</td><td>Annotations to be added to all statefulset resources</td><td></td></tr><tr><td>console.statefulSetExtraLabels</td><td>Additional labels to be added to all statefulset resources</td><td></td></tr><tr><td>console.deploymentAnnotations</td><td>Annotations to be added to all deployment resources</td><td></td></tr><tr><td>console.deploymentExtraLabels</td><td>Additional labels to be added to all deployment resources</td><td></td></tr><tr><td>console.jobAnnotations</td><td>Annotations to be added to all job resources</td><td></td></tr><tr><td>console.jobExtraLabels</td><td>Additional labels to be added to all job resources</td><td></td></tr><tr><td>console.service.annotations</td><td>Annotations to be added to all service resources</td><td></td></tr><tr><td>console.service.extraLabels</td><td>Additional labels to be added to all service resources</td><td></td></tr><tr><td>console.service.ingress.annotations</td><td>Annotations to be added to the ingress resource</td><td></td></tr><tr><td>console.service.ingress.extraLabels</td><td>Additional labels to be added to the ingress resource</td><td></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="requirements"></a>Requirements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="storage-class"></a>Storage Class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#storage-class" title="Direct link to heading">#</a></h3><p>Stratos uses persistent volumes. In order to deploy it in your Kubernetes environment, you must
have a storage class available.</p><p>Without configuration, the Stratos Helm Chart will use the default storage class. If a default storage
class is not available, installation will fail.</p><p>To check if a <code>default</code> storage class exists, you can list your configured storage classes with <code>kubectl get storageclass</code>. If no storage class has <code>(default)</code> after it, then you need to either specify a storage class override or declare a default storage class for your Kubernetes cluster.</p><p>For non-production environments, you may want to use the <code>hostpath</code> storage class. See the <a href="https://github.com/SUSE/scf/wiki/How-to-Install-SCF#choosing-a-storage-class" target="_blank" rel="noopener noreferrer">SCF instructions</a> for details on setting this up. Note that you will need to make this storage class the default storage class, e.g.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl patch storageclass &lt;your-class-name&gt; -p &#x27;{&quot;metadata&quot;: {&quot;annotations&quot;:{&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;}}}&#x27;</span></div></div></div></div></div><p>Where <code>&lt;your-class-name&gt;</code> would be <code>hostpath</code> if you follow the SCF instructions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="specifying-a-custom-storage-class"></a>Specifying a custom Storage Class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#specifying-a-custom-storage-class" title="Direct link to heading">#</a></h3><p>If no default storage class has been defined in the Kubernetes cluster. The Stratos helm chart will fail to deploy successfully. To check if a <code>default</code> storage class exists, you can list your configured storage classes with <code>kubectl</code>. If no storage class has <code>(default)</code> after it, then you need to either specify a storage class override or declare a default storage class for your Kubernetes cluster.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="providing-storage-class-override"></a>Providing Storage Class override<a aria-hidden="true" tabindex="-1" class="hash-link" href="#providing-storage-class-override" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get storageclass</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                TYPE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ssd                 kubernetes.io/host-path   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">persistent          kubernetes.io/host-path   </span></div></div></div></div></div><p>For instance to use the storage class <code>persistent</code> to deploy Console persistent volume claims, store the following to a file called <code>override.yaml</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">storageClass: persistent</span></div></div></div></div></div><p>If you want MariaDB to use a specific storage class (which can be different to that used for the other components), then specify the following:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">storageClass: persistent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mariadb:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  persistence:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    storageClass: persistent</span></div></div></div></div></div><p>Run Helm with the override:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create namespace console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">helm install my-console stratos/console --namespace=console -f override.yaml</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-a-default-storage-class"></a>Create a default Storage Class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-a-default-storage-class" title="Direct link to heading">#</a></h4><p>Alternatively, you can configure a storage class with <code>storageclass.kubernetes.io/is-default-class</code> set to <code>true</code>. For instance the following storage class will be declared as the default. If you don&#x27;t have the <code>hostpath</code> provisioner available in your local cluster, please follow the instructions on <a href="https://github.com/kubernetes-incubator/external-storage/tree/master/docs/demo/hostpath-provisioner" target="_blank" rel="noopener noreferrer">link</a>, to deploy one.</p><p>If the hostpath provisioner is available, save the file to <code>storageclass.yaml</code></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: StorageClass</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: storage.k8s.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    storageclass.kubernetes.io/is-default-class: &quot;true&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">provisioner: kubernetes.io/host-path # Or whatever the local hostpath provisioner is called</span></div></div></div></div></div><p>To create it in your kubernetes cluster, execute the following.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create -f storageclass.yaml</span></div></div></div></div></div><p>See <a href="https://kubernetes.io/docs/tasks/administer-cluster/change-default-storage-class/" target="_blank" rel="noopener noreferrer">Storage Class documentation</a> for more information.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cloudfoundry/stratos/edit/master/website/docs/deploy/kubernetes/installation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/deploy/kubernetes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Deploying in Kubernetes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/deploy/all-in-one"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying with the All-In-One Docker Container »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#accessing-the-console" class="table-of-contents__link">Accessing the Console</a></li><li><a href="#uninstalling" class="table-of-contents__link">Uninstalling</a></li><li><a href="#using-a-load-balancer" class="table-of-contents__link">Using a Load Balancer</a></li><li><a href="#using-an-ingress-controller" class="table-of-contents__link">Using an Ingress Controller</a></li><li><a href="#deploying-from-a-private-image-repository" class="table-of-contents__link">Deploying from a Private Image Repository</a></li><li><a href="#deploying-with-your-own-tls-certificates" class="table-of-contents__link">Deploying with your own TLS certificates</a></li><li><a href="#using-an-external-database" class="table-of-contents__link">Using an External Database</a></li><li><a href="#specifying-uaa-configuration" class="table-of-contents__link">Specifying UAA configuration</a></li><li><a href="#configuring-a-local-user-account" class="table-of-contents__link">Configuring a local user account</a></li><li><a href="#specifying-annotations-and-labels" class="table-of-contents__link">Specifying Annotations and Labels</a></li><li><a href="#requirements" class="table-of-contents__link">Requirements</a><ul><li><a href="#storage-class" class="table-of-contents__link">Storage Class</a></li><li><a href="#specifying-a-custom-storage-class" class="table-of-contents__link">Specifying a custom Storage Class</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Deploying Stratos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://cloudfoundry.slack.com/?redir=%2Fmessages%2Fstratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/talks">Presentations and Talks</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Cloud Foundry Foundation</div></div></div></footer></div>
<script src="/styles.d3be2d04.js"></script>
<script src="/runtime~main.4575875f.js"></script>
<script src="/main.777ea05f.js"></script>
<script src="/1.222372fe.js"></script>
<script src="/2.34eb096d.js"></script>
<script src="/44.c6ce18b1.js"></script>
<script src="/45.0e0f5b82.js"></script>
<script src="/20ac7829.07547941.js"></script>
<script src="/17896441.836a2f96.js"></script>
<script src="/301a1e3d.f3607179.js"></script>
</body>
</html>