<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Deploying as a Cloud Foundry Application | STRATOS</title><meta data-react-helmet="true" name="docsearch:version" content="4.1.0"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Deploying as a Cloud Foundry Application | STRATOS"><meta data-react-helmet="true" name="description" content="Deployment Steps"><meta data-react-helmet="true" property="og:description" content="Deployment Steps"><meta data-react-helmet="true" property="og:url" content="https://stratos.app/docs/4.1.0/deploy/cloud-foundry/cloud-foundry"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://stratos.app/docs/4.1.0/deploy/cloud-foundry/cloud-foundry"><link rel="stylesheet" href="/styles.60bb3a68.css">
<link rel="preload" href="/styles.ba8c1c7a.js" as="script">
<link rel="preload" href="/runtime~main.42da528d.js" as="script">
<link rel="preload" href="/main.665ad137.js" as="script">
<link rel="preload" href="/1.0fc57a13.js" as="script">
<link rel="preload" href="/2.2301668a.js" as="script">
<link rel="preload" href="/18b93cb3.4e08a4fd.js" as="script">
<link rel="preload" href="/1be78505.d4f14d0b.js" as="script">
<link rel="preload" href="/c4f5d8e4.9e519ac8.js" as="script">
<link rel="preload" href="/300.47f23f30.js" as="script">
<link rel="preload" href="/299.b62c1cc6.js" as="script">
<link rel="preload" href="/4ea6dffd.98c64661.js" as="script">
<link rel="preload" href="/17896441.e3b26253.js" as="script">
<link rel="preload" href="/7da5f9ac.36d8593b.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/4.1.0/">4.1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/deploy/cloud-foundry/cloud-foundry">Latest</a></li><li><a class="dropdown__link" href="/docs/deploy/cloud-foundry/cloud-foundry">4.4.0</a></li><li><a class="dropdown__link" href="/docs/4.3.0/deploy/cloud-foundry/cloud-foundry">4.3.0</a></li><li><a class="dropdown__link" href="/docs/4.2.0/deploy/cloud-foundry/cloud-foundry">4.2.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/4.1.0/deploy/cloud-foundry/cloud-foundry">4.1.0</a></li><li><a class="dropdown__link" href="/docs/4.0.0/deploy/cloud-foundry/cloud-foundry">4.0.0</a></li><li><a class="dropdown__link" href="/versions">All Versions</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx" style="margin-left:2px">üåô</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx" style="margin-left:1px">‚òÄÔ∏è</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/deploy/cloud-foundry/cloud-foundry">Latest</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/deploy/cloud-foundry/cloud-foundry">4.4.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/4.3.0/deploy/cloud-foundry/cloud-foundry">4.3.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/4.2.0/deploy/cloud-foundry/cloud-foundry">4.2.0</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/4.1.0/deploy/cloud-foundry/cloud-foundry">4.1.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/4.0.0/deploy/cloud-foundry/cloud-foundry">4.0.0</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">All Versions</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/license">License</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Deploying Stratos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Cloud Foundry</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/4.1.0/deploy/cloud-foundry/cloud-foundry">Deploy on Cloud Foundry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/cloud-foundry/db-migration">Database service bindings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/cloud-foundry/cf-troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/deploy/kubernetes">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/deploy/kubernetes/helm-installation">Deploy using Helm</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/all-in-one">Docker All-in-One</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/access">Accessing Stratos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/4.1.0/deploy/troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/advanced/invite-user-guide">Configuring User Invites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/advanced/sso">Configuring Single Sign On</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/advanced/bosh-metrics">Connecting Prometheus-boshrelease</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/introduction">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Frontend</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/frontend">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/frontend-tests">Tests</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Backend</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/backend">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Deploy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/deploy">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/developers-guide-helm">Helm</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/developers-guide-e2e-tests">E2E Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/developer/developers-guide-env-tech">Dev Links &amp; Env</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extending Stratos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/extensions/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/extensions/v4-migration">Migrating to V4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/extensions/theming">Theming Stratos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/extensions/frontend">Frontend Extensions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/4.1.0/extensions/backend">Backend Plugins</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="alert alert--secondary margin-bottom--md" role="alert"><div class="container_2r0I">This is documentation for <strong>4.1.0</strong>. For the latest released documentation see  <strong><a href="/docs/deploy/cloud-foundry/cloud-foundry">4.4.0</a></strong>.</div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: 4.1.0</span></div><header><h1 class="docTitle_1Lrw">Deploying as a Cloud Foundry Application</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deployment-steps"></a>Deployment Steps<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deployment-steps" title="Direct link to heading">#</a></h2><p>Stratos can be pushed as an application to Cloud Foundry. </p><p>You can do it in two ways:</p><ol><li><a href="#deploy-stratos-from-source">Deploy Stratos from source</a></li><li><a href="#deploy-stratos-from-docker-image">Deploy Stratos from docker image</a></li></ol><p>You will then be able to open a web browser and navigate to the console URL:</p><p><code>https://console.&lt;DOMAIN&gt;</code></p><p>Where <code>&lt;DOMAIN&gt;</code> is the default domain configured for your Cloud Foundry cluster.</p><p>To login use the following credentials detailed <a href="/docs/4.1.0/deploy/access">here</a>.</p><p>If you run into issues, please refer to the <a href="/docs/4.1.0/deploy/cloud-foundry/cf-troubleshooting">Troubleshooting Guide</a> below.</p><blockquote><p>The console will pre-configure the host Cloud Foundry endpoint. No other CF instance should be registered unless the instructions in
the section <a href="#associate-cloud-foundry-database-service">Associate Cloud Foundry database service</a> are followed.
All other deployment methods (helm, docker all-in-one, etc) allow the registration of multiple CF instances by default.</p></blockquote><p>Note:</p><ol><li>You need the cf CLI command line tool installed and available on the path.</li><li>You need to have configured the cf cli to point to your Cloud Foundry cluster, to be authenticated with your credentials and to be targeted at the organization and space where you want the console application be created.</li><li>You may need to configure Application Security Groups on your Cloud Foundry Cluster in order that  Stratos can communicate with the Cloud Foundry API. See <a href="#application-security-groups">below</a> for more information.</li><li>The Stratos Console will automatically detect the API endpoint for your Cloud Foundry. To do so, it relies on the <code>cf_api_url</code> value inside the <code>VCAP_APPLICATION</code> environment variable. If this is not provided by your Cloud Foundry platform, then you must manually update the application manifest as described <a href="#console-fails-to-start">below</a>.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-stratos-in-production-environments"></a>Running Stratos in Production Environments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-stratos-in-production-environments" title="Direct link to heading">#</a></h3><p>Please be aware of the following when running Stratos in a production environment:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configure-a-session-store-secret"></a>Configure a Session Store Secret<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-a-session-store-secret" title="Direct link to heading">#</a></h4><p>Stratos uses a Session Store Secret to protect the user session cookie. We recommend that you set your own value for this secret - choosing an alphanumeric string of your choice.</p><p>You can configure this secret by editing the application manifest and adding to the <code>env</code> section, e.g.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">applications:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- name: console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ... memory, disk settings here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SESSION_STORE_SECRET: &lt;your session store secret here&gt;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pre-configure-uaa-client-used-for-user-invites"></a>Pre-configure UAA client used for user invites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pre-configure-uaa-client-used-for-user-invites" title="Direct link to heading">#</a></h4><blockquote><p>You can skip this step and configure any CFs invite clients via the Stratos UI.</p></blockquote><p> To set the UAA client for user invites, supply the client id and client secret as environment variables as shown below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">INVITE_USER_CLIENT_ID=&lt;UAA_CLIENT_ID&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INVITE_USER_CLIENT_SECRET=&lt;UAA_CLIENT_SECRET&gt;</span></div></div></div></div></div><p>This will set the the UAA client and UAA secret used to invite users for the default CF only.</p><p>See the <a href="/docs/4.1.0/advanced/invite-user-guide">invite users guide</a> for more information about user invites in Stratos.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-of-the-default-embedded-sqlite-database"></a>Use of the Default Embedded SQLite Database<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-of-the-default-embedded-sqlite-database" title="Direct link to heading">#</a></h4><p>We do not recommend deploying Stratos to a production environment using the default embedded SQLite Database. Instead we recommend creating
and binding a database service instance to Stratos - for more information see <a href="/docs/4.1.0/deploy/cloud-foundry/db-migration">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-stratos-from-source"></a>Deploy Stratos from source<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-stratos-from-source" title="Direct link to heading">#</a></h3><p>To do so, <code>clone</code> the <strong>stratos</strong> repository, <code>cd</code> into the newly cloned repository and <code>push</code> to Cloud Foundry. This can be done with:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/cloudfoundry/stratos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd stratos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git checkout tags/stable -b stable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./build/store-git-metadata.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cf push</span></div></div></div></div></div><p>If the cf push exceeds the time allowed see the instructions <a href="#pre-building-the-ui">here</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pre-building-the-ui"></a>Pre-building the UI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pre-building-the-ui" title="Direct link to heading">#</a></h4><p>Due to the memory usage of the Angular compiler (see below), when deployed to Cloud Foundry via <code>cf push</code>, Stratos does not use AOT (Ahead-of-Time) compilation.</p><p>If you wish to enable AOT or reduce the push time, you can pre-build the UI before pushing.</p><p>This can be done with:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/cloudfoundry/stratos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd stratos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm run prebuild-ui</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cf push</span></div></div></div></div></div><p>You will need a recent version of Node installed locally to do this.</p><p>The <code>prebuild-ui</code> npm script performs a build of the front-end UI and then zips up the resulting folder into a package named <code>stratos-frontend-prebuild.zip</code>. The Stratos buildpack will unpack this zip file and use its contents instead of building the UI during staging, when this file is present.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="memory-usage"></a>Memory Usage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#memory-usage" title="Direct link to heading">#</a></h4><p>The Stratos Cloud Foundry <code>manifest.yml</code> states that the application requires
<code>1512MB</code> of memory. This is required during the build process of the
application since building an angular2 app is a memory intensive process. The
memory limit can be scaled down after the app has been pushed, using the cf CLI.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-stratos-from-docker-image"></a>Deploy Stratos from docker image<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-stratos-from-docker-image" title="Direct link to heading">#</a></h3><p>Deploy Stratos using the <a href="https://hub.docker.com/r/splatform/stratos" target="_blank" rel="noopener noreferrer"><code>splatform/stratos</code></a> docker image</p><blockquote><p><strong>NOTE:</strong> Your Cloud Foundry must have docker support <a href="https://docs.cloudfoundry.org/adminguide/docker.html#enable" target="_blank" rel="noopener noreferrer">enabled</a>.</p></blockquote><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cf push console -o splatform/stratos:stable -m 128M -k 384M</span></div></div></div></div></div><blockquote><p>Note: You can replace <code>console</code> in the command above with a name of your choice for the application</p></blockquote><p>Alternatively cf push using a manifest</p><ul><li>download <a href="https://raw.githubusercontent.com/cloudfoundry/stratos/master/manifest-docker.yml" target="_blank" rel="noopener noreferrer">manifest-docker.yml</a> or create your own manifest file:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">applications</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> splatform/stratos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">stable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">instances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 128M</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">disk_quota</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 384M</span></div></div></div></div></div></li><li>now, you can simply push it to Cloud Foundry:<div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cf push -f manifest-docker.yml</span></div></div></div></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="associate-cloud-foundry-database-service"></a>Associate Cloud Foundry database service<a aria-hidden="true" tabindex="-1" class="hash-link" href="#associate-cloud-foundry-database-service" title="Direct link to heading">#</a></h2><p>Follow instructions <a href="/docs/4.1.0/deploy/cloud-foundry/db-migration">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="use-sso-login"></a>Use SSO Login<a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-sso-login" title="Direct link to heading">#</a></h2><p>By default Stratos will present its own login UI and only supports username and password authentication with your UAA. You can configure Stratos to use UAA&#x27;s login UI by specifying the <code>SSO_LOGIN</code> environment variable in the manifest, for example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">applications:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- name: console</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ... memory, disk settings here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  env:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    SSO_LOGIN: true</span></div></div></div></div></div><p>When SSO Login is enabled, Stratos will also auto-connect to the Cloud Foundry it is deployed in using the token obtained during the SSO Login flow.</p><p>For more information - see <a href="/docs/4.1.0/advanced/sso">Single-Sign On</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cloudfoundry/stratos/edit/master/website/versioned_docs/version-4.1.0/deploy/cloud-foundry/cloud-foundry.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/4.1.0/deploy/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Deploying Stratos</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/4.1.0/deploy/cloud-foundry/db-migration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Associate a Cloud Foundry database service ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment-steps" class="table-of-contents__link">Deployment Steps</a><ul><li><a href="#running-stratos-in-production-environments" class="table-of-contents__link">Running Stratos in Production Environments</a></li><li><a href="#deploy-stratos-from-source" class="table-of-contents__link">Deploy Stratos from source</a></li><li><a href="#deploy-stratos-from-docker-image" class="table-of-contents__link">Deploy Stratos from docker image</a></li></ul></li><li><a href="#associate-cloud-foundry-database-service" class="table-of-contents__link">Associate Cloud Foundry database service</a></li><li><a href="#use-sso-login" class="table-of-contents__link">Use SSO Login</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/deploy/overview">Deploying Stratos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://cloudfoundry.slack.com/?redir=%2Fmessages%2Fstratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/talks">Presentations and Talks</a></li></ul></div></div><div class="text--center"><div>Copyright ¬© 2021 Cloud Foundry Foundation</div></div></div></footer></div>
<script src="/styles.ba8c1c7a.js"></script>
<script src="/runtime~main.42da528d.js"></script>
<script src="/main.665ad137.js"></script>
<script src="/1.0fc57a13.js"></script>
<script src="/2.2301668a.js"></script>
<script src="/18b93cb3.4e08a4fd.js"></script>
<script src="/1be78505.d4f14d0b.js"></script>
<script src="/c4f5d8e4.9e519ac8.js"></script>
<script src="/300.47f23f30.js"></script>
<script src="/299.b62c1cc6.js"></script>
<script src="/4ea6dffd.98c64661.js"></script>
<script src="/17896441.e3b26253.js"></script>
<script src="/7da5f9ac.36d8593b.js"></script>
</body>
</html>