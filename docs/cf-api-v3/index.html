<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">cf-api-v3 | STRATOS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="cf-api-v3 | STRATOS"><meta data-react-helmet="true" name="description" content="Cloud Foundry API v3"><meta data-react-helmet="true" property="og:description" content="Cloud Foundry API v3"><meta data-react-helmet="true" property="og:url" content="https://stratos.app/docs/cf-api-v3"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://stratos.app/docs/cf-api-v3"><link rel="stylesheet" href="/styles.3c40d568.css">
<link rel="preload" href="/styles.d3be2d04.js" as="script">
<link rel="preload" href="/runtime~main.8cd43c38.js" as="script">
<link rel="preload" href="/main.13529198.js" as="script">
<link rel="preload" href="/1.222372fe.js" as="script">
<link rel="preload" href="/2.34eb096d.js" as="script">
<link rel="preload" href="/44.c6ce18b1.js" as="script">
<link rel="preload" href="/45.0e0f5b82.js" as="script">
<link rel="preload" href="/20ac7829.07547941.js" as="script">
<link rel="preload" href="/17896441.836a2f96.js" as="script">
<link rel="preload" href="/1b74e361.de79dc46.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">cf-api-v3</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="cloud-foundry-api-v3"></a>Cloud Foundry API v3<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cloud-foundry-api-v3" title="Direct link to heading">#</a></h1><p>See <a href="/docs/cf-api-v2-usage">Cloud Foundry API v2 Feature Usage</a> for v2 information</p><ol><li><a href="#Comparing-v2-features-to-v3">Comparing v2 features to v3</a></li><li><a href="#V3-Availability">V3 Availability</a></li><li><a href="#Stratos-Adoption-of-v3">Stratos Adoption of v3</a></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="comparing-v2-features-to-v3"></a>Comparing v2 features to v3<a aria-hidden="true" tabindex="-1" class="hash-link" href="#comparing-v2-features-to-v3" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v3-docs"></a>V3 Docs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#v3-docs" title="Direct link to heading">#</a></h3><ul><li><a href="http://v3-apidocs.cloudfoundry.org/" target="_blank" rel="noopener noreferrer">http://v3-apidocs.cloudfoundry.org/</a></li><li><a href="https://github.com/cloudfoundry/cc-api-v3-style-guide" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="entity-relations-include-relations----include"></a>Entity Relations... <code>include-relations</code> --&gt; <code>include</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#entity-relations-include-relations----include" title="Direct link to heading">#</a></h3><p>Previously...</p><ul><li>When fetching an entity, any referenced child entity or list of entities were omitted. To have them included the property name was
provided in an <code>include-relations</code> parameter. The covered direct child entities and children of that child entity</li><li>Lists of entities that were bigger than 50 were simply omitted.</li></ul><p>Now, from my understanding, ...</p><ul><li>Child entities (single or lists) are referenced by guid in the parent&#x27;s <code>relationships</code> section<ul><li>Pagination of lists is only proposed - <a href="https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources</a></li></ul></li><li>Child entities are also listed, with a url to fetch (like the old <code>&lt;property&gt;_url</code> property), in the <code>links</code> section.</li><li>An <code>include</code> parameter can be supplied which will add an <code>included</code> section to the entity</li><li>An entity in the <code>included</code> section is in the same format as the parent</li><li><code>include</code> has very limited implementation<ul><li><code>/apps</code> only supports <code>space</code> include</li><li><code>/organization</code> doesn&#x27;t support any includes</li><li><code>/space</code> doesn&#x27;t support any includes</li><li>(see <a href="/docs/cf-api-v2-usage#Inline-Relations">Cloud Foundry API v2 Feature Usage - Inline-Relations</a> for required)
~- Unclear if <code>include</code> will cover chained entities aka <code>inline-relations-depth</code> from v2~</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="collections---pagination"></a>Collections - Pagination<a aria-hidden="true" tabindex="-1" class="hash-link" href="#collections---pagination" title="Direct link to heading">#</a></h3><ul><li>This is covered just fine (fetch a specific page, total page count, total result count, etc)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="collections---sorting"></a>Collections - Sorting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#collections---sorting" title="Direct link to heading">#</a></h3><ul><li>It looks like all entities can be sorted via <code>created_at</code> and <code>updated_at</code> dates, plus some also have <code>name</code>. Given that v2 really only
supported sorting by <code>created_at</code> date this should be fine for feature parity</li><li>However in order for Stratos to leave behind local sorting there are many missing sort fields (see <a href="/docs/cf-api-v2-usage#sortingfiltering">Cloud Foundry API v2 Feature Usage - Sorting/Filtering</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="collections---filtering"></a>Collections - Filtering<a aria-hidden="true" tabindex="-1" class="hash-link" href="#collections---filtering" title="Direct link to heading">#</a></h3><ul><li>Similar level of filtering is available with the addition of <code>name</code></li><li>In order for Stratos to leave behind local filtering there are still some fields that need to be implemented (see <a href="/docs/cf-api-v2-usage#sortingfiltering">Cloud Foundry API v2 Feature Usage - Sorting/Filtering</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="entity-validation"></a>Entity Validation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#entity-validation" title="Direct link to heading">#</a></h3><ul><li>For v2 info see <a href="/docs/cf-api-v2-usage#entity-relations--validation">Cloud Foundry API v2 Feature Usage - Entity Relations &amp; Validation</a></li><li>It looks like, given that <code>include</code> is considerable beefed up, this will still be possible in v3. An update of the entity relations
process will be required though.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="application-state"></a>Application State<a aria-hidden="true" tabindex="-1" class="hash-link" href="#application-state" title="Direct link to heading">#</a></h3><ul><li>For v2 info see <a href="/docs/cf-api-v2-usage#Application-State">Cloud Foundry API v2 Feature Usage - Application State</a></li><li>The improved application state string that stratos shows will be much harder to determine<ul><li>App <code>package_state</code> is from a separate entity that is not <code>linked</code> and requires an additional request</li><li>App <code>package_updated_at</code> is from a separate entity that is not <code>linked</code> and requires an additional request</li><li>App instance state should now come form <code>/processes</code> and given that instance:process are now not 1:1 harder to summaries state from</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v3-availability"></a>V3 Availability<a aria-hidden="true" tabindex="-1" class="hash-link" href="#v3-availability" title="Direct link to heading">#</a></h2><ul><li>Stratos needs to support cloud foundry&#x27;s with different api versions from many different providers and epochs</li><li>Update, many common CFs we use support some kind of v3 version.<blockquote><p>Note - cf-dev I haven&#x27;t tested as it&#x27;s unsupported on linux - see <a href="https://github.com/cloudfoundry-incubator/cfdev/issues/18" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry-incubator/cfdev/issues/18</a> (major regression from PCFDev there)</p></blockquote></li><li><del>Currently, it looks like neither SCF (2.84.0), IBM Cloud (2.106.0) or PCFDev (2.82.0) support v3 with <code>includes</code>. PWS (2.125.0) and
SAP (2.120.0) however do.</del><blockquote><p>Note - <del>Couldn&#x27;t find an easy way to determine the version of v3</del></p></blockquote></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stratos-adoption-of-v3"></a>Stratos Adoption of v3<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stratos-adoption-of-v3" title="Direct link to heading">#</a></h2><p>Given that...</p><ul><li>Endpoints are being converted to v3 iteratively, not all are available at the moment</li><li>Stratos will need to support v2 for a while to come (legacy installs, etc)</li></ul><p>Then Stratos should either ..</p><ul><li>Wait until v3 has feature parity with v2, create new Stratos that uses v3 and mothball versions of Stratos that talk to v2</li><li>Support both versions at runtime, switching each endpoint from v2 to v3 at determined cut off dates</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="blocking-issues"></a>Blocking Issues<a aria-hidden="true" tabindex="-1" class="hash-link" href="#blocking-issues" title="Direct link to heading">#</a></h3><ul><li>Coverage of <code>include</code> is not on par with v2 <code>include-relations</code><ul><li>To meet parity it should support all entities in <code>relationships</code> and <code>links</code>, whether one to one or one to many</li><li>Currently not supported on all endpoints and does not cover enough <code>relationships</code>/<code>links</code> (see <a href="/docs/cf-api-v2-usage#Inline-Relations">Cloud Foundry API v2 Feature Usage - Inline-Relations</a>)</li><li>For instance new v3 entities are not <code>include</code>s (<code>/apps</code> - <code>package</code>, <code>processes</code>, <code>route_mappings</code>, <code>environment_variables</code>, <code>droplets</code>, <code>tasks</code>)</li><li><del>Not supported by common CFs used to develop with (SCF, PCFDev)</del>.</li></ul></li><li>Entities do not contain all properties that were in v2 (where functionality has not changed)<ul><li>Covers simple values and entities (one to one and one to many)</li><li>For instance <code>/organizations</code> and <code>/spaces</code> endpoints are not completed and contain only guid, create/updated date and name (space additionally has experimental <code>organization</code>)  </li></ul></li><li>Entities returned by v2/v3 endpoints are not consistent<ul><li>For example<ul><li>push an app with <code>v3-push</code> and it shows up in <code>v2/apps</code></li><li><code>v3/service_bindings</code> does not return service bindings that aren&#x27;t attached to a v3 app</li></ul></li><li>Without knowing exactly all these occurrences we won&#x27;t be able to work in a mixed v2/v3 endpoint state</li></ul></li><li><del>Cannot determine if a CF supports v3 or when it does support v3 which endpoints it has</del><ul><li>v3 version and supported endpoints can be determined by response to <code>&lt;cf api url&gt;</code> and <code>&lt;cf api url&gt;/v3</code></li><li><del>Getting the v2 version is simple, I don&#x27;t know if there&#x27;s correlation to v3 version</del></li><li><del>Having a v3/info which published which endpoints are supported would help a lot. Including whether <code>include</code> is supported</del></li></ul></li><li><del>Chained <code>links</code>/relations don&#x27;t appear to be supported (fetch app--&gt;space--&gt;org all in one request)</del><ul><li>It looks like this is achievable by notation, for example <code>/v3/apps?include=space,space.organization</code></li><li>See <a href="https://github.com/cloudfoundry/cc-api-v3-style-guide#including-related-resources" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide#including-related-resources</a></li><li><del>Might be wrong on this one due to the lack of current <code>include</code> integration</del></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="frustrating-issues"></a>Frustrating Issues<a aria-hidden="true" tabindex="-1" class="hash-link" href="#frustrating-issues" title="Direct link to heading">#</a></h3><ul><li>Fetching a list of users as a non-cf admin involves making a request to every organisation (<code>organization/${guid}/users</code>). The response
of all of these calls contains a lot of overlapping data<ul><li>Ideally making a request to <code>/users</code> as a user with 0:M org roles would return a list of users in those organisations</li><li>Have asked this question in the V3 Users proposal - <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.tyy5zdgqnnt0">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.tyy5zdgqnnt0</a></li></ul></li><li>Not all v2 endpoints exist in v3, for instance no <code>domains</code>, <code>events</code>, <code>route</code>, org/space quota definitions, etc<ul><li>This would make our entity validation much more complex</li></ul></li><li>Cannot utilise v3 pagination due to limited sorting and filtering functionality (see <a href="/docs/cf-api-v2-usage#sortingFiltering">Cloud Foundry API v2 Feature Usage - Sorting/Filtering</a> for missing fields)<ul><li>This is currently on par with v2, but causes us a lot of headaches for large data sets</li></ul></li><li>The Stratos method of calculating application state has become much harder<ul><li>Additional requests to app <code>/packages</code> are required. This would be resolved if applications were <code>link</code>ed to package</li><li>Would love a flag in <code>/apps</code> to also return the <code>processes</code> data. This would mean a longer request time, but we&#x27;re making that request
in the frontend anyway.</li></ul></li><li>No easy way to fetch organisation or space summary information<ul><li>Stratos show summary information such as number of users (see <a href="/docs/cf-api-v2-usage#cloud-foundry-organisation-and-space-summary-information">Cloud Foundry API v2 Feature Usage V2 Specifics - Cloud Foundry, Organisation and Space Summary Information</a> for specific stats)</li><li>In an ideal world we could hit one endpoint that would give us the counts for all of these details. Filters could then limit this to
an organisation or space</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stratos-tasks"></a>Stratos Tasks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stratos-tasks" title="Direct link to heading">#</a></h3><ul><li>Depending on adoption approach, Stratos needs to support v2 and v3 endpoints concurrently<ul><li>Mask the input/output to v3 requests, such that store, pagination, list configuration and entity validation remains mostly unchanged</li><li>To do this ...<ul><li>Query params need to be converted when making v3 requests</li><li>v3 responses need to be converted into v2 format (entity/metadata, <code>&lt;x&gt;_url</code>, etc).</li></ul></li></ul></li><li>Update application deploy/lifecycle process to match new v3 process (<a href="https://github.com/cloudfoundry/stratos/issues/3150" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/stratos/issues/3150</a>)</li><li>Support new &#x27;processes&#x27; concept (<a href="https://github.com/cloudfoundry/stratos/issues/3154" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/stratos/issues/3154</a>), including updating how
we determine application state</li><li>Fully investigate non <code>get</code> methods (create an application, delete a space, etc)</li><li>Related Issues<ul><li><a href="https://github.com/cloudfoundry/stratos/issues/2922" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/stratos/issues/2922</a></li><li><a href="https://github.com/cloudfoundry/stratos/issues/3149" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/stratos/issues/3149</a> (Container issue for related v3 api process changes)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="questions"></a>Questions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#questions" title="Direct link to heading">#</a></h3><ul><li><del>Will <code>include</code> cover children of children? For instance <code>app</code> --&gt; <code>route</code> --&gt; <code>domain</code></del><ul><li><del>How will lists be covered? For instance <code>organization</code> --&gt; <code>space</code> --&gt; <code>service instances</code></del></li></ul></li><li>How will the deprecation of v2 endpoints happen?<ul><li>One by one?</li><li>All together once v2 parity is reached?</li></ul></li><li>Will duplicated <code>include</code>ed entities only appear once in a top level (entity or pagination) <code>included</code>? For example..conceptually..<ul><li>Fetch an application, the application&#x27;s space, the application&#x27;s routes and application routes spaces all in a single request</li><li>If the application&#x27;s space appeared in the route&#x27;s space, would it only appear once in the application&#x27;s<code>included</code> section... or appear twice (once
in application <code>included</code> and again in route <code>included</code>)?</li></ul></li><li>The style guide references a way to fetch one to many relationships as <code>/v3/apps/:app_guid/relationships/routes</code> (<a href="https://github.com/cloudfoundry/cc-api-v3-style-guide#viewing-1" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide#viewing-1</a>)<ul><li>This doesn&#x27;t seem to work (404), is it yet to be implemented?</li><li><code>/v3/apps/:app_guid/routes</code> also does not work (404)</li><li><code>/v3/apps/:app_guid/route_mappings</code> works, but there doesn&#x27;t seem to be a way to <code>include</code> the <code>route</code> such that it appears in the response</li></ul></li><li>Which version is the <code>include=space,space.organization</code> notation supported in?</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v3-required-includes-order_by-filters-missing-properties"></a>v3 Required <code>include</code>s, <code>order_by</code>, filters, missing properties<a aria-hidden="true" tabindex="-1" class="hash-link" href="#v3-required-includes-order_by-filters-missing-properties" title="Direct link to heading">#</a></h2><p>A few UX examples have been provided, however it&#x27;s quite hard to list all requirements without a deep dive into the code. Most requirements
for existing endpoints come from the need to either ..</p><ul><li>Fetch properties, properties of properties, etc inline instead of making additional request. For the application wall&#x27;s application list
this can be the difference between making 21 calls and then a subsequent 18 calls.. rather than receive everything with the apps request.</li><li>Switch from a local list (sorting and filtering done locally due to lack of support in v2) to a non-local list (pagination, sorting and
filtering done via v3 api)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="apps"></a><code>/apps</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#apps" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td><del><code>include</code></del></td><td><del><code>space</code></del></td><td></td><td></td><td></td></tr><tr><td><code>include</code></td><td>Organization via <code>space.organization</code></td><td>[HIGH]</td><td>Used in application wall&#x27;s application list to filter local lists by org, show org name on app wall app entries, upfront fetch leading to quicker navigation to app summary</td><td>See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</td></tr><tr><td><code>include</code></td><td><code>packages</code></td><td>[HIGH]</td><td>See [1]</td><td>Required to determine application state (state, updated_at)</td></tr><tr><td><code>include</code></td><td><code>processes</code></td><td>[HIGH]</td><td>See [1]</td><td>Required to determine application state (instances)</td></tr><tr><td><code>include</code></td><td>Stats via <code>processes.stats</code></td><td>[HIGH]</td><td>See [1]</td><td>Required to determine application state (state).</td></tr><tr><td><code>include</code></td><td><code>current_droplet</code></td><td>[HIGH]</td><td>See [1]</td><td>Required to determine application state (state).</td></tr><tr><td><code>include</code></td><td>Builds via <code>packages.builds</code></td><td>[HIGH]</td><td>See [1]</td><td>v3 currently has no link or relation. Required to determine application state (state).</td></tr><tr><td><code>order_by</code></td><td>sum of <code>processes</code> <code>instances</code> count <a href="#v3-Required-Features">See below for notes</a></td><td>[MEDIUM]</td><td>See [2]</td><td></td></tr><tr><td><code>order_by</code></td><td>sum of <code>processes</code> <code>disk_in_mb</code> count <a href="#v3-Required-Features">See below for notes</a></td><td>[MEDIUM]</td><td>See [2]</td><td></td></tr><tr><td><code>order_by</code></td><td>sum of <code>processes</code> <code>memory_in_mb</code> count <a href="#v3-Required-Features">See below for notes</a></td><td>[MEDIUM]</td><td>See [2]</td><td></td></tr><tr><td>filter</td><td><code>processes</code> state</td><td>[MEDIUM]</td><td>User wishes to find all apps that have errored processes</td><td></td></tr><tr><td>filter</td><td>organization name</td><td>[MEDIUM]</td><td>See [3]</td><td></td></tr><tr><td>filter</td><td>space name</td><td>[MEDIUM]</td><td>See [3]</td><td></td></tr></tbody></table><p>[1] Property/s used to determine application state without spamming requests (<a href="#Application-State">app state</a>). On the application wall
page we determine the state of up to 9 apps at a time. Returning this information in a single request, or during the initial request, will
save apps x missing property&#x27;s endpoints (packages, process, process stats, current_droplet, etc). This could lead to 21 concurrent calls
followed by another 18 (given the results of the first run).</p><p>[2] Enables sorting by instance count in tables. See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more information on local and non-local list sorting).</p><p>[3] Allows free text search by org or space name in application wall (rather than manual selection of cf, org and then space). For instance a user types part of an org name in a
special org drop down and is presented with list of apps in matching orgs. This is a short cut for the user having to scroll down a list in a
drop down.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="appguid"></a><code>/app/${guid}</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#appguid" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td><code>include</code></td><td><code>route_mappings</code></td><td>[HIGH]</td><td>See [1]</td><td>See [2]</td></tr><tr><td><code>include</code></td><td>Route via <code>route_mappings.route</code></td><td>[HIGH]</td><td>See [1]</td><td>See [2]. <code>/route</code> has no v3 equivalent</td></tr><tr><td><code>include</code></td><td>Domain via <code>route_mappings.route.domain</code></td><td>[HIGH]</td><td>See [1]</td><td>See [2]. <code>/domain</code> has no v3 equivalent. Required to display complete route url. From Greg <code>We are thinking about adding a fqdn on the routes object, which may be another way to achieve the same objective.</code></td></tr><tr><td>links</td><td><code>service_bindings</code></td><td>[HIGH]</td><td>See [3]</td><td>See [2]</td></tr><tr><td><code>include</code></td><td><code>service_bindings</code></td><td>[HIGH]</td><td>See [3]</td><td>See [2]</td></tr><tr><td><del><code>include</code></del></td><td><del><code>space</code></del></td><td></td><td></td><td></td></tr><tr><td><code>include</code></td><td><code>space.organization</code></td><td>[HIGH]</td><td>Display the name of the organisation</td><td>See [2]</td></tr><tr><td><code>include</code></td><td><code>packages</code></td><td>[HIGH]</td><td>See [4]</td><td>See [2]. Required to determine application state (state, updated_at)</td></tr><tr><td><code>include</code></td><td><code>processes</code></td><td>[HIGH]</td><td>See [4]</td><td>See [2]. Required to determine app state (instances)</td></tr><tr><td><code>include</code></td><td><code>processes.stats</code></td><td>[HIGH]</td><td>See [4]</td><td>See [2]. Required to determine app state (state).</td></tr><tr><td><code>include</code></td><td><code>current_droplet</code></td><td>[HIGH]</td><td>See [4]</td><td>See [2]. Required to determine app state (state).</td></tr><tr><td><code>include</code></td><td><code>packages.builds</code></td><td>[HIGH]</td><td>See [4]</td><td>See [2]. v3 currently has no link or relation. Required to determine app state (state).</td></tr><tr><td>links</td><td><code>features</code></td><td>[MEDIUM]</td><td>Display current app settings (ssh enabled and revisions enabled).</td><td>See [2]. There&#x27;s a top level ssh enabled flag, however this will show if at the app level ssh is enabled</td></tr><tr><td><code>include</code></td><td><code>features</code></td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td><code>include</code></td><td><code>droplets</code></td><td>[MEDIUM]</td><td>We don&#x27;t currently use this, however displaying these in a list to the user would be beneficial.</td><td>See [2]</td></tr><tr><td><code>include</code></td><td><code>tasks</code></td><td>[MEDIUM]</td><td>We don&#x27;t currently use this, however displaying these in a list to the user would be beneficial.</td><td>See [2]</td></tr><tr><td><del>property</del></td><td><del>stack guid/whole entity</del></td><td></td><td></td><td>Stack name is included inline in an inlined <code>lifecycle</code> object. This placement seems like an odd pattern. It&#x27;s not an entity on it&#x27;s own with it&#x27;s own endpoint... but does contain an inline entity (stack). The inlined stack contains only a name and not guid/rest of stack entity. From Greg <code>Stack is referenced by name rather than guid due to some windows usage patterns. The window&#x27;s stacks are not associated with a rootfs like the linux ones are, so they can add new stacks without having to update the stacks of all windows apps.</code>.</td></tr><tr><td><del>property</del></td><td><del>buildpack guid/whole entity</del></td><td></td><td></td><td>As per stack guid above. From Greg <code>Similarly with buildpacks, having associations by name rather than guid allows for upgrades across stack versions (for example the recent upgrade from cflinuxfs2 -&gt; cflinuxfs3) without having to re-associated apps with the new stack&#x27;s version of the buildpack.</code></td></tr><tr><td><del>property</del></td><td><del><code>enable_ssh</code></del></td><td></td><td></td><td><del>.. or similar property to determine if ssh&#x27;ing to an instance is allowed at the app level</del>. See <code>/v3/apps/:guid/ssh_enabled</code></td></tr></tbody></table><p>[1] Display bound route count &amp; list of routes</p><p>[2] Display information quicker on the Application pages without having to make additional requests (either once for a single entity or
multiple times in the case of 1:M, for example <code>route_mappings</code> would require multiple requests to <code>routes</code> to fetch each one)</p><p>[3] Display bound service instance count &amp; list of services, determine if a service is already bound when user is binding existing service to app, etc</p><p>[4] Property/s used to determine application state without spamming endpoints (<a href="#Application-State">app state</a>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="appsguidpackages"></a><code>/apps/{guid}/packages</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#appsguidpackages" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>links</td><td><code>builds</code></td><td>[HIGH]</td><td>See explanation in <code>/app/${guid}</code> - <code>packages.builds</code></td><td>See [1]</td></tr><tr><td><code>include</code></td><td><code>builds</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><code>include</code></td><td><code>app</code></td><td>[LOW]</td><td>This might come in handy in the future, more specifically if we list all <code>packages</code></td><td></td></tr></tbody></table><p>[1] If at some point we&#x27;ve fetched an app without this property we will make a separate request to fetch it, so the same includes/links are required</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="appsguidprocesses"></a><code>/apps/{guid}/processes</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#appsguidprocesses" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td><code>include</code></td><td><code>stats</code></td><td>[HIGH]</td><td>See explanation in <code>/app/${guid}</code> - <code>processes.stats</code></td><td>See [1]</td></tr><tr><td><code>order_by</code></td><td><code>state</code></td><td>[MEDIUM]</td><td>In the app summary page instances tab we show a list of instances and their properties. This needs updating, but it&#x27;s easy to imagine that we will display a list of processes in v3</td><td>See [2]</td></tr><tr><td><code>order_by</code></td><td><code>stats</code> <code>usage.time</code></td><td>[MEDIUM]</td><td>See above</td><td>See [2][See below for notes](#v3-Required-Features)</td></tr><tr><td><code>order_by</code></td><td><code>stats</code> <code>usage.cpu</code></td><td>[MEDIUM]</td><td>See above</td><td>See [2][See below for notes](#v3-Required-Features)</td></tr><tr><td><code>order_by</code></td><td><code>stats</code> <code>usage.mem</code></td><td>[MEDIUM]</td><td>See above</td><td>See [2][See below for notes](#v3-Required-Features)</td></tr><tr><td><code>order_by</code></td><td><code>stats</code> <code>usage.disk</code></td><td>[MEDIUM]</td><td>See above</td><td>See [2][See below for notes](#v3-Required-Features)</td></tr><tr><td>filter</td><td><code>state</code></td><td>[MEDIUM]</td><td>See above</td><td></td></tr></tbody></table><p>[1] If at some point we&#x27;ve fetched an app without this property we will make a separate request to fetch it, so the same includes/links are required</p><p>[2] This will be required in order to switch from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_bindings-functionality-for-missing-appsguidservice_bindings-only"></a><code>/service_bindings</code> (functionality for missing /apps/{guid}/service_bindings only)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_bindings-functionality-for-missing-appsguidservice_bindings-only" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>links</td><td><code>service_instance</code></td><td>[HIGH]</td><td>See [1]</td><td>See [2]</td></tr><tr><td><code>include</code></td><td><code>service_instance</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>service_instance.service</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><code>include</code></td><td><code>service_instance.service</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>service_instance.service_plan</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><code>include</code></td><td><code>service_instance.service_plan</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>service_instance.tags</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><code>include</code></td><td><code>service_instance.tags</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><code>order_by</code></td><td>service instance name</td><td>[MEDIUM]</td><td>See [1]</td><td>See [3]</td></tr><tr><td><code>order_by</code></td><td>service name</td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td><code>order_by</code></td><td>service plan name</td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td>filter</td><td>service instance name</td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td>filter</td><td>service name</td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td>filter</td><td>service plan name</td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr></tbody></table><p>[1] Display a list of service instances associated with a specific application</p><p>[2] Fetching this information inline avoids making lots of additional requests</p><p>[3] This will be required in order to switch from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spaces"></a><code>/spaces</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#spaces" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>links</td><td><code>service_instances</code></td><td>[LOW]</td><td>Show the count of service instances in the space</td><td>In the medium to long term we will determine this another way</td></tr><tr><td><code>include</code></td><td><code>service_instances</code></td><td>[LOW]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>space_quota_definition</code></td><td>[HIGH]</td><td>Display the space quota information information per space</td><td>See [3]</td></tr><tr><td><code>include</code></td><td><code>space_quota_definition</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td><del><code>include</code></del></td><td><del><code>applications</code></del></td><td></td><td></td><td>Previous requirement pre-scaling change</td></tr><tr><td><code>order_by</code></td><td><code>created_at</code></td><td>[MEDIUM]</td><td>See [1]</td><td>See [2]</td></tr><tr><td><code>order_by</code></td><td><code>name</code></td><td>[MEDIUM]</td><td>See [1]</td><td>See [2]</td></tr><tr><td>filter</td><td>name</td><td>[MEDIUM]</td><td>See [1]. Pre-check to ensure a space name is not taken before attempting to create.</td><td>See [2]</td></tr></tbody></table><p>[1] Display a list of spaces in an organisation</p><p>[2] This will be required in order to switch from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><p>[3] Avoids making additional requests. Particularly important when viewing multiple spaces at the same time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spacesguid"></a><code>/spaces/${guid}</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#spacesguid" title="Direct link to heading">#</a></h3><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>links</td><td><code>organization</code></td><td>[HIGH]</td><td>Basic location information, display name and other information</td><td>Avoids making additional requests</td></tr><tr><td><code>include</code></td><td><code>organization</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>domains</code></td><td>[MEDIUM]</td><td>Efficiency request, better to get these here than separately</td><td><code>/domains</code> has no v3 equivalent</td></tr><tr><td><code>include</code></td><td><code>domains</code></td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>routes</code></td><td>[LOW]</td><td>Display the number of routes in this organisation</td><td><code>/routes</code> has no v3 equivalent. See [1]</td></tr><tr><td><code>include</code></td><td><code>routes</code></td><td>[LOW]</td><td>See above</td><td>See above</td></tr><tr><td><del>links</del></td><td><del><code>routes.domain</code></del></td><td></td><td></td><td>Depending on the list of routes is bad due to scaling. We&#x27;re removing this functionality</td></tr><tr><td><del><code>include</code></del></td><td><del><code>routes.domain</code></del></td><td></td><td></td><td>See above</td></tr><tr><td><del>links</del></td><td><del><code>routes.applications</code></del></td><td></td><td></td><td>See above</td></tr><tr><td><del><code>include</code></del></td><td><del><code>routes.applications</code></del></td><td></td><td></td><td>See above</td></tr><tr><td><del><code>include</code></del></td><td><del><code>applications</code></del></td><td></td><td></td><td>Previous requirement pre-scaling change</td></tr><tr><td>links</td><td><code>service_instances</code></td><td>[LOW]</td><td>Display the number of service instances in this organisation</td><td>See [1]</td></tr><tr><td><code>include</code></td><td><code>service_instances</code></td><td>[LOW]</td><td>See above</td><td>See above</td></tr><tr><td><del>links</del></td><td><del><code>service_instances.service_bindings</code></del></td><td></td><td></td><td>Depending on the list of service instances is bad due to scaling. We&#x27;re removing this functionality</td></tr><tr><td><del>`include</del>`</td><td><del><code>service_instances.service_bindings</code></del></td><td></td><td></td><td></td></tr><tr><td>links</td><td>space quota</td><td>[HIGH]</td><td>Display quota information, when possible how close user is to various quotas, etc</td><td>space quota has no v3 equivalent</td></tr><tr><td><code>include</code></td><td>space quota</td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>property</td><td>allow_ssh</td><td>[HIGH]</td><td>Display value to user. Important from an admin sense</td><td></td></tr><tr><td>links</td><td><code>space.developers</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr><tr><td><code>include</code></td><td><code>space.developers</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr><tr><td>links</td><td><code>space.managers</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr><tr><td><code>include</code></td><td><code>space.managers</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr><tr><td>links</td><td><code>space.auditors</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr><tr><td><code>include</code></td><td><code>space.auditors</code></td><td>[HIGH]</td><td>See [2]</td><td>we might be able to fetch this via new users endpoints described in <a href="https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj">https://docs.google.com/document/d/1EA65UN3Xsi0EuX-3YfbFNqtJGseFr6FGBt2SR9c4Aqk/edit#heading=h.n1xhc33y2wyj</a></td></tr></tbody></table><p>[1] Pre-scaling change. We just want the total count of entities. In the medium to long term we will determine this another way</p><p>[2] Display a list of users and their roles</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="routes-functionality-for-spacesguidroutes-only"></a><code>/routes</code> (functionality for `/spaces/${guid}/routes only)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#routes-functionality-for-spacesguidroutes-only" title="Direct link to heading">#</a></h3><blockquote><p>Note - There doesn&#x27;t seem to be a way to list routes in a space. This is separate to the concept of listing them inline in a space (with
some overlap though). This endpoint would be used to fetch a list of routes for a specific space and display them to the user.
The <code>/v3/route_mappings</code> endpoint provides a way to search for routes by app or route but not by space.</p></blockquote><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>filter</td><td>space guid</td><td>[HIGH]</td><td>Display a list of routes that are in a space</td><td></td></tr><tr><td>links</td><td><code>domain</code></td><td>[LOW]</td><td>Display the url of the route</td><td>Not required if the fqdn is returned in the base route</td></tr><tr><td><code>include</code></td><td><code>domain</code></td><td>[LOW]</td><td>See above</td><td>See above</td></tr><tr><td>links</td><td><code>applications</code></td><td>[HIGH]</td><td>Display a list of the apps that are bound to the route</td><td>Avoids making a request to <code>/v3/route_mappings</code> for each route (could be a massive amount). We expect these relations to be 1-to-not-many</td></tr><tr><td><code>include</code></td><td><code>applications</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_instances-functionality-for-spacesguidservice_instances-only"></a><code>/service_instances</code> (functionality for /spaces/{guid}/service_instances only)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_instances-functionality-for-spacesguidservice_instances-only" title="Direct link to heading">#</a></h3><blockquote><p>There&#x27;s lots more that could be added here when taking into account our service instance lists in places other than the space details page
(mainly including space and space.organisation).</p></blockquote><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>link</td><td><code>service_instance.applications</code></td><td>[HIGH]</td><td>Display bound applications in a list of service instances</td><td>Not sure if this will be implemented the same as routes and route mappings, but would need similar functionality to fetch list inline. This could be replaced with a link to <code>service_bindings</code> and then the <code>app</code> for that binding</td></tr><tr><td><code>include</code></td><td><code>service_instance.applications</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>link</td><td><code>service_plan</code></td><td>[HIGH]</td><td>Display service plan information per SI in a list of SI</td><td>See [2]. <code>/service_plan</code> has no v3 equivalent</td></tr><tr><td><code>include</code></td><td><code>service_plan</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>link</td><td><code>service</code></td><td>[HIGH]</td><td>Display service information per SI in a list of SI</td><td>See [2] <code>/service</code> has no v3 equivalent</td></tr><tr><td><code>include</code></td><td><code>service</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>filter</td><td>space guid</td><td>[MEDIUM]</td><td></td><td>See [3]</td></tr><tr><td>filter</td><td>org guid</td><td>[MEDIUM]</td><td></td><td>See [3]</td></tr><tr><td>filter</td><td><code>name</code></td><td>[MEDIUM]</td><td></td><td>See [3]</td></tr><tr><td><code>include</code></td><td>space</td><td>[HIGH]</td><td>When showing all SI in a CF fetch inlined space to space name and allow local filtering by space and org</td><td></td></tr></tbody></table><p>[1] Display list of service instances in a space</p><p>[2] Avoids making additional requests per service instance</p><p>[3] This will be required in order to switch from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="user_provided_service_instances"></a><code>/user_provided_service_instances</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#user_provided_service_instances" title="Direct link to heading">#</a></h3><p>We&#x27;ve recently integrated user provided service instances into Stratos. There doesn&#x27;t seem to be any current support for this in v3. We&#x27;d
need similar functionality to <code>/service_instances</code> (where there&#x27;s cross over).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="services"></a><code>/services</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#services" title="Direct link to heading">#</a></h3><blockquote><p>Comparison of missing functionality as per proposed spec in <a href="https://docs.google.com/document/d/1bDsEiZRwQJNUI41cQlUaioaY7JA1fnv_AThOI2ekPXNM/edit#" target="_blank" rel="noopener noreferrer">https://docs.google.com/document/d/1bDsEiZRwQJNUI41cQlUaioaY7JA1fnv_AThOI2ekPXNM/edit#</a>
For simplicity have kept the <code>services</code> name instead of the proposed new name of  <code>service_offerings</code></p></blockquote><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>link</td><td><code>service.service_plans</code></td><td>[HIGH]</td><td>Show a count of service plans for a service when showing a list of services</td><td>Depends on implementation of &#x27;included&#x27; pagination - see <a href="https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources</a></td></tr><tr><td><code>include</code></td><td><code>service.service_plans</code></td><td>[HIGH]</td><td>See above</td><td>See above</td></tr><tr><td>link</td><td><code>service.service_broker</code></td><td>[MEDIUM]</td><td>Not currently used, but would be very nice to display the broker where a service is coming from</td><td>Note - whole service broker entity (not just name), would be nice</td></tr><tr><td><code>include</code></td><td><code>service.service_broker</code></td><td>[MEDIUM]</td><td>See above</td><td>See above</td></tr><tr><td>filter</td><td><code>name</code></td><td>[MEDIUM]</td><td></td><td>See [1]</td></tr><tr><td><code>order_by</code></td><td><code>name</code></td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr><tr><td><code>order_by</code></td><td><code>active</code></td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr><tr><td><code>order_by</code></td><td><code>bindable</code></td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr></tbody></table><p>[1] As other situations where we fetch lists this will help us from switching from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="serviceguid"></a><code>/service/${guid}</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#serviceguid" title="Direct link to heading">#</a></h3><p>See <code>/services</code> above</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spacesguidservices"></a><code>spaces/${guid}/services</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#spacesguidservices" title="Direct link to heading">#</a></h3><p>To be replaced with <code>/services</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="servicesguidservice_plans"></a><code>services/${guid}/service_plans</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#servicesguidservice_plans" title="Direct link to heading">#</a></h3><p>Currently missing in v3 docs. If implemented would need the same link/includes as <code>service_bindings</code> section below</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_bindings-post"></a><code>service_bindings</code> (POST)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_bindings-post" title="Direct link to heading">#</a></h3><p>This looks good</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_bindingsguid-delete"></a><code>service_bindings/${guid}</code> (DELETE)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_bindingsguid-delete" title="Direct link to heading">#</a></h3><p>This looks good</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_bindings"></a><code>service_bindings</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_bindings" title="Direct link to heading">#</a></h3><p>We don&#x27;t currently use this, but in order for us to we would need the following</p><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td><code>include</code></td><td><code>service_binding.service_instance</code></td><td>[HIGH]</td><td></td><td></td></tr><tr><td><code>include</code></td><td><code>service_binding.app</code></td><td>[HIGH]</td><td></td><td></td></tr><tr><td>filter</td><td>service instance name</td><td>[MEDIUM]</td><td></td><td>See [1]</td></tr><tr><td>filter</td><td>application name</td><td>[MEDIUM]</td><td></td><td>See [1]</td></tr><tr><td><code>order_by</code></td><td>service instance name</td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr><tr><td><code>order_by</code></td><td>application name</td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr></tbody></table><p>[1] As other situations where we fetch lists this will help us from switching from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_bindingsguid"></a><code>service_bindings/${guid}</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_bindingsguid" title="Direct link to heading">#</a></h3><p>We don&#x27;t currently use this, but in order for us to we would need the same as above (list service_bindings)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_brokers"></a><code>service_brokers</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_brokers" title="Direct link to heading">#</a></h3><p>We don&#x27;t currently use this but it would be very nice to. In order for us to though we would need the following</p><table><thead><tr><th>Type</th><th>Name</th><th>Priority</th><th>UX Example</th><th>Notes</th></tr></thead><tbody><tr><td>link</td><td><code>service_broker.space</code></td><td>[HIGH]</td><td></td><td></td></tr><tr><td><code>include</code></td><td><code>service_broker.space</code></td><td>[HIGH]</td><td></td><td></td></tr><tr><td>link</td><td><code>service_broker.service_offerings</code></td><td>[HIGH]</td><td>For a given broker show a list of service offerings without making multiple requests</td><td></td></tr><tr><td><code>include</code></td><td><code>service_broker.service_offerings</code></td><td>[HIGH]</td><td>See above</td><td></td></tr><tr><td>filter</td><td>service broker name</td><td>[MEDIUM]</td><td></td><td>See [1]</td></tr><tr><td>filter</td><td>space guid</td><td>[MEDIUM]</td><td></td><td>See [1]</td></tr><tr><td><code>order_by</code></td><td>service broker name</td><td>[MEDIUM]</td><td></td><td>see [1]</td></tr></tbody></table><p>[1] As other situations where we fetch lists this will help us from switching from local (fetch allll entities in a list and sort locally) to non-local (use CF api pagination including sorting). See (<a href="/docs/cf-api-v2-usage#Lists">non-local lists</a> for more detail on local and non-local lists).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service_brokersguid"></a><code>service_brokers/{guid}</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#service_brokersguid" title="Direct link to heading">#</a></h3><p>We don&#x27;t currently use this, but in order for us to we would need the same as above (list service_bindings)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v3-required-features"></a>v3 Required Features<a aria-hidden="true" tabindex="-1" class="hash-link" href="#v3-required-features" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="single-included-section-per-request"></a>Single &#x27;included` section per request<a aria-hidden="true" tabindex="-1" class="hash-link" href="#single-included-section-per-request" title="Direct link to heading">#</a></h3><p>There should hopefully be a single <code>included</code> section even if <code>included</code> elements have their own <code>include</code>s. Not quite a requirement, but a real nice to have.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="included-lists"></a><code>include</code>d lists<a aria-hidden="true" tabindex="-1" class="hash-link" href="#included-lists" title="Direct link to heading">#</a></h3><p>Ability to set <code>include</code> for lists of entities. See <a href="https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources" target="_blank" rel="noopener noreferrer">https://github.com/cloudfoundry/cc-api-v3-style-guide#proposal-pagination-of-related-resources</a></p><p>Use case - Routes, packages, builds, process stats, etc in an application</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="order_by-values-in-included-entities"></a><code>order_by</code> values in <code>include</code>d entities<a aria-hidden="true" tabindex="-1" class="hash-link" href="#order_by-values-in-included-entities" title="Direct link to heading">#</a></h3><p>Ability to use properties of entities that are from the <code>included</code> section in <code>order_by</code>.</p><p>Covers simple case of sorting by a property in a 1:1 <code>include</code> and also summation of numerical properties in 1:M relationship.</p><p>Use case - sort applications by instance count. Requires <code>process</code> as an <code>include</code> and ability to sort applications by sum of <code>process</code>s <code>instance</code> values</p><p>Use case - as above, but instead of instances the sum of memory in a <code>processes</code> <code>memory_in_mb</code>. Need to consider whether <code>processes</code> state value should be taken into account (only include processes that are running)</p><p>Use case - as above, but the sum of <code>processes</code> <code>stats</code> <code>usage.mem</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="filter-values-in-included"></a>filter values in <code>include</code>d<a aria-hidden="true" tabindex="-1" class="hash-link" href="#filter-values-in-included" title="Direct link to heading">#</a></h3><p>As per <code>order_by</code>, delve into an <code>included</code> entity and filter out given a specific path.</p><p>Use case - Filter a list of service bindings by service instance name, service name or service plan name</p><p>Use case - Filter a list of apps by organization or space</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cloudfoundry/stratos/edit/master/website/docs/cf-api-v3.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comparing-v2-features-to-v3" class="table-of-contents__link">Comparing v2 features to v3</a><ul><li><a href="#v3-docs" class="table-of-contents__link">V3 Docs</a></li><li><a href="#entity-relations-include-relations----include" class="table-of-contents__link">Entity Relations... <code>include-relations</code> --&gt; <code>include</code></a></li><li><a href="#collections---pagination" class="table-of-contents__link">Collections - Pagination</a></li><li><a href="#collections---sorting" class="table-of-contents__link">Collections - Sorting</a></li><li><a href="#collections---filtering" class="table-of-contents__link">Collections - Filtering</a></li><li><a href="#entity-validation" class="table-of-contents__link">Entity Validation</a></li><li><a href="#application-state" class="table-of-contents__link">Application State</a></li></ul></li><li><a href="#v3-availability" class="table-of-contents__link">V3 Availability</a></li><li><a href="#stratos-adoption-of-v3" class="table-of-contents__link">Stratos Adoption of v3</a><ul><li><a href="#blocking-issues" class="table-of-contents__link">Blocking Issues</a></li><li><a href="#frustrating-issues" class="table-of-contents__link">Frustrating Issues</a></li><li><a href="#stratos-tasks" class="table-of-contents__link">Stratos Tasks</a></li><li><a href="#questions" class="table-of-contents__link">Questions</a></li></ul></li><li><a href="#v3-required-includes-order_by-filters-missing-properties" class="table-of-contents__link">v3 Required <code>include</code>s, <code>order_by</code>, filters, missing properties</a><ul><li><a href="#apps" class="table-of-contents__link"><code>/apps</code></a></li><li><a href="#appguid" class="table-of-contents__link"><code>/app/${guid}</code></a></li><li><a href="#appsguidpackages" class="table-of-contents__link"><code>/apps/{guid}/packages</code></a></li><li><a href="#appsguidprocesses" class="table-of-contents__link"><code>/apps/{guid}/processes</code></a></li><li><a href="#service_bindings-functionality-for-missing-appsguidservice_bindings-only" class="table-of-contents__link"><code>/service_bindings</code> (functionality for missing /apps/{guid}/service_bindings only)</a></li><li><a href="#spaces" class="table-of-contents__link"><code>/spaces</code></a></li><li><a href="#spacesguid" class="table-of-contents__link"><code>/spaces/${guid}</code></a></li><li><a href="#routes-functionality-for-spacesguidroutes-only" class="table-of-contents__link"><code>/routes</code> (functionality for `/spaces/${guid}/routes only)</a></li><li><a href="#service_instances-functionality-for-spacesguidservice_instances-only" class="table-of-contents__link"><code>/service_instances</code> (functionality for /spaces/{guid}/service_instances only)</a></li><li><a href="#user_provided_service_instances" class="table-of-contents__link"><code>/user_provided_service_instances</code></a></li><li><a href="#services" class="table-of-contents__link"><code>/services</code></a></li><li><a href="#serviceguid" class="table-of-contents__link"><code>/service/${guid}</code></a></li><li><a href="#spacesguidservices" class="table-of-contents__link"><code>spaces/${guid}/services</code></a></li><li><a href="#servicesguidservice_plans" class="table-of-contents__link"><code>services/${guid}/service_plans</code></a></li><li><a href="#service_bindings-post" class="table-of-contents__link"><code>service_bindings</code> (POST)</a></li><li><a href="#service_bindingsguid-delete" class="table-of-contents__link"><code>service_bindings/${guid}</code> (DELETE)</a></li><li><a href="#service_bindings" class="table-of-contents__link"><code>service_bindings</code></a></li><li><a href="#service_bindingsguid" class="table-of-contents__link"><code>service_bindings/${guid}</code></a></li><li><a href="#service_brokers" class="table-of-contents__link"><code>service_brokers</code></a></li><li><a href="#service_brokersguid" class="table-of-contents__link"><code>service_brokers/{guid}</code></a></li></ul></li><li><a href="#v3-required-features" class="table-of-contents__link">v3 Required Features</a><ul><li><a href="#single-included-section-per-request" class="table-of-contents__link">Single &#39;included` section per request</a></li><li><a href="#included-lists" class="table-of-contents__link"><code>include</code>d lists</a></li><li><a href="#order_by-values-in-included-entities" class="table-of-contents__link"><code>order_by</code> values in <code>include</code>d entities</a></li><li><a href="#filter-values-in-included" class="table-of-contents__link">filter values in <code>include</code>d</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Deploying Stratos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://cloudfoundry.slack.com/?redir=%2Fmessages%2Fstratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/talks">Presentations and Talks</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Cloud Foundry Foundation</div></div></div></footer></div>
<script src="/styles.d3be2d04.js"></script>
<script src="/runtime~main.8cd43c38.js"></script>
<script src="/main.13529198.js"></script>
<script src="/1.222372fe.js"></script>
<script src="/2.34eb096d.js"></script>
<script src="/44.c6ce18b1.js"></script>
<script src="/45.0e0f5b82.js"></script>
<script src="/20ac7829.07547941.js"></script>
<script src="/17896441.836a2f96.js"></script>
<script src="/1b74e361.de79dc46.js"></script>
</body>
</html>