<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">cf-entity-scaling | STRATOS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="cf-entity-scaling | STRATOS"><meta data-react-helmet="true" name="description" content="Cloud Foundry Scaling - How Stratos Handles Large Lists"><meta data-react-helmet="true" property="og:description" content="Cloud Foundry Scaling - How Stratos Handles Large Lists"><meta data-react-helmet="true" property="og:url" content="https://stratos.app/docs/cf-entity-scaling"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://stratos.app/docs/cf-entity-scaling"><link rel="stylesheet" href="/styles.2e94191b.css">
<link rel="preload" href="/styles.78aa2ed4.js" as="script">
<link rel="preload" href="/runtime~main.120a8289.js" as="script">
<link rel="preload" href="/main.8d981086.js" as="script">
<link rel="preload" href="/1.ac640629.js" as="script">
<link rel="preload" href="/2.b943da11.js" as="script">
<link rel="preload" href="/48.42bd91cb.js" as="script">
<link rel="preload" href="/49.6e8e7afa.js" as="script">
<link rel="preload" href="/20ac7829.e87d6cb5.js" as="script">
<link rel="preload" href="/17896441.e643ff38.js" as="script">
<link rel="preload" href="/14f3979f.701ec82e.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.png" alt="Stratos"><strong class="navbar__title">STRATOS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">cf-entity-scaling</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="cloud-foundry-scaling---how-stratos-handles-large-lists"></a>Cloud Foundry Scaling - How Stratos Handles Large Lists<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cloud-foundry-scaling---how-stratos-handles-large-lists" title="Direct link to heading">#</a></h1><p>Stratos presents collections of entities via the Stratos list component. The list component presents the collection in a paginated, sortable and searchable way in either a set of cards or a table.
In order to achieve this, due to the limitations of the APIs used, the list may fetch all entities (as opposed to fetching entities for the visible page only) and paginate, sort and search locally.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="protecting-stratos-from-large-collections"></a>Protecting Stratos from Large Collections<a aria-hidden="true" tabindex="-1" class="hash-link" href="#protecting-stratos-from-large-collections" title="Direct link to heading">#</a></h2><p>In some cases the number of entities in a collection can be incredibly high. Stratos can decide to not fetch them all in order to protect the CF from
a substantial number of requests. To do this the first page is fetched and the total number of entities is checked against a limit. If under
the limit the remaining pages are asynchronously fetched. If over then the remaining pages are ignored and the user is informed that the list could not fetch all entities.</p><p>Depending on the list, the user can then try to filter the collection such that the number of entities is below the limit. Depending on configuration
the user also has the option to fetch all entities regardless of the limit.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="applicable-lists"></a>Applicable Lists<a aria-hidden="true" tabindex="-1" class="hash-link" href="#applicable-lists" title="Direct link to heading">#</a></h2><p>Currently, in 3.1.0, this large collection protection is only applicable to the following lists</p><ul><li>Application Wall</li><li>Marketplace (Services)</li><li>Services (Service &amp; User Provided Service Instances)</li><li>CF, Organisation and Space Users</li><li>CF Routes</li></ul><p>In the future we hope to expand this to all lists.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="determining-the-list-limit"></a>Determining the List Limit<a aria-hidden="true" tabindex="-1" class="hash-link" href="#determining-the-list-limit" title="Direct link to heading">#</a></h2><p>The limit at which we won&#x27;t fetch all entities is determined, in least important to most important order, by</p><p>1) The global CF default - 600
2) The Jetstream override for all lists - by default not set</p><p>In the future we hope to allow each end user of Stratos to determine their own limit (if they have the correct permissions).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="fetch-all-feature"></a>Fetch All feature<a aria-hidden="true" tabindex="-1" class="hash-link" href="#fetch-all-feature" title="Direct link to heading">#</a></h2><p>If the list hits the limit the user will be presented with a button to <code>Fetch All</code> entities. Clicking this button ensures the list reverts
back as if there were no limit and thus fetching all entities. This feature is disabled by default and can be enabled by a Jetstream override.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configuration"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><p>The Jetstream overrides can be set via environment variable, or if in helm, as values.</p><table><thead><tr><th>Environment Variable</th><th>Helm Value</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>UI_LIST_MAX_SIZE</code></td><td><code>console.ui.listMaxSize</code></td><td>Override the default maximum number of entities that a configured list can fetch. When a list meets this amount additional pages are not fetched</td><td></td></tr><tr><td><code>UI_LIST_ALLOW_LOAD_MAXED</code></td><td><code>console.ui.listAllowLoadMaxed</code></td><td>If the maximum list size is met give the user the option to fetch all results</td><td>false</td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cloudfoundry/stratos/edit/master/website/docs/cf-entity-scaling.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#protecting-stratos-from-large-collections" class="table-of-contents__link">Protecting Stratos from Large Collections</a></li><li><a href="#applicable-lists" class="table-of-contents__link">Applicable Lists</a></li><li><a href="#determining-the-list-limit" class="table-of-contents__link">Determining the List Limit</a></li><li><a href="#fetch-all-feature" class="table-of-contents__link">Fetch All feature</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Deploying Stratos</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://cloudfoundry.slack.com/?redir=%2Fmessages%2Fstratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://github.com/cloudfoundry/stratos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/talks">Presentations and Talks</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 Cloud Foundry Foundation</div></div></div></footer></div>
<script src="/styles.78aa2ed4.js"></script>
<script src="/runtime~main.120a8289.js"></script>
<script src="/main.8d981086.js"></script>
<script src="/1.ac640629.js"></script>
<script src="/2.b943da11.js"></script>
<script src="/48.42bd91cb.js"></script>
<script src="/49.6e8e7afa.js"></script>
<script src="/20ac7829.e87d6cb5.js"></script>
<script src="/17896441.e643ff38.js"></script>
<script src="/14f3979f.701ec82e.js"></script>
</body>
</html>