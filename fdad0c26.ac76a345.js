(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{135:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return d}));var a=n(2),r=n(6),o=(n(0),n(139)),i={title:"Frontend Development",sidebar_label:"Overview"},l={id:"developer/frontend",isDocsHomePage:!1,title:"Frontend Development",description:"Introduction to the stack",source:"@site/docs/developer/frontend.md",permalink:"/docs/developer/frontend",editUrl:"https://github.com/cloudfoundry/stratos/edit/master/website/docs/developer/frontend.md",sidebar_label:"Overview",sidebar:"docs",previous:{title:"Developing the Stratos Console",permalink:"/docs/developer/introduction"},next:{title:"Frontend Tests",permalink:"/docs/developer/frontend-tests"}},c=[{value:"Introduction to the stack",id:"introduction-to-the-stack",children:[]},{value:"Set up Dependencies",id:"set-up-dependencies",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"Run the frontend",id:"run-the-frontend",children:[]},{value:"Build",id:"build",children:[]},{value:"Creating angular items via angular cli",id:"creating-angular-items-via-angular-cli",children:[]},{value:"Theming",id:"theming",children:[]}],p={rightToc:c};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"introduction-to-the-stack"},"Introduction to the stack"),Object(o.b)("p",null,"Have a look through the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/developer/developers-guide-env-tech"}),"Env + Tech")," page to get acquainted with some of the new technologies used in v2.\nThese include video's, tutorials and examples of Angular 2+, Typescript and Redux. There's also some advice on helpful plugins to use if\nusing Visual Studio Code. If you feel comfortable with these and are happy with your dev environment please skip straight to\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"#set-up-dependencies"}),"Set up Dependencies")),Object(o.b)("h2",{id:"set-up-dependencies"},"Set up Dependencies"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Set up a Stratos backend - The frontend cannot run without a backend. Both backend and frontend exist in this same repo.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Don't need to make changes to the backend code? To set up a backend run through the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"../deploy/overview"}),"deploy section"),",\nchoose a deployment method and bring one up. These deployments will bring up the entire backend, including api service and database\nalong with a V2 frontend."),Object(o.b)("li",{parentName:"ul"},"Need to make changes to the backend code? Follow the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"backend"}),"Backend Development")," set up guide"))),Object(o.b)("li",{parentName:"ul"},"Install ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://nodejs.org"}),"NodeJs")," (minimum node version 12.13.0)"),Object(o.b)("li",{parentName:"ul"},"Install ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://cli.angular.io/"}),"Angular CLI")," - ",Object(o.b)("inlineCode",{parentName:"li"},"npm install -g @angular/cli"))),Object(o.b)("h2",{id:"configuration"},"Configuration"),Object(o.b)("p",null,"Configuration information can be found in two places"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"./proxy.conf.js"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"In new forks this is missing and needs to be created using ",Object(o.b)("inlineCode",{parentName:"li"},"./proxy.conf.template.js")," as a template."),Object(o.b)("li",{parentName:"ul"},"Contains the address of the backend. Which will either be...",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"If the backend is deployed via the instructions in the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"../deploy/overview"}),"deploy section"),"\nthe url will be the same address as the V1 console's frontend address. For instance ",Object(o.b)("inlineCode",{parentName:"li"},"https://localhost")," would translate to",Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'const PROXY_CONFIG = {\n  "/pp": {\n    "target": {\n    "host": "localhost",\n    "protocol": "https:",\n    "port": 443\n  },\n  "secure": false,\n  "changeOrigin": true,\n  "ws": true,\n}\n'))),Object(o.b)("li",{parentName:"ul"},"If the backend is running locally using the instructions in ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"backend"}),"Backend Development"),", the url will local host\nwith a port of the ",Object(o.b)("inlineCode",{parentName:"li"},"CONSOLE_PROXY_TLS_ADDRESS")," value from ",Object(o.b)("inlineCode",{parentName:"li"},"src/jetstream/config.properties"),". By default this will be 5445. For\ninstance",Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'const PROXY_CONFIG = {\n  "/pp": {\n    "target": {\n      "host": "localhost",\n      "protocol": "https:",\n      "port": 5443\n    },\n    "ws": true,\n    "secure": false,\n    "changeOrigin": true,\n  }\n}\n'))))))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"./src/frontend/environments/environment.ts")," for developer vs production like config",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"This contains more general settings for the frontend and does not usually need to be changed")))),Object(o.b)("h2",{id:"run-the-frontend"},"Run the frontend"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"(First time only) Copy ",Object(o.b)("inlineCode",{parentName:"li"},"./proxy.conf.template.js")," to ",Object(o.b)("inlineCode",{parentName:"li"},"./proxy.conf.js")," and update with required Jetstream url (see above for more info)"),Object(o.b)("li",{parentName:"ol"},"Run ",Object(o.b)("inlineCode",{parentName:"li"},"npm install")),Object(o.b)("li",{parentName:"ol"},"Run ",Object(o.b)("inlineCode",{parentName:"li"},"npm start")," for a dev server. (the app will automatically reload if you change any of the source files)",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"If this times out please use ",Object(o.b)("inlineCode",{parentName:"li"},"npm run start-high-mem")," instead"),Object(o.b)("li",{parentName:"ul"},"To change the port from the default 4200, add ",Object(o.b)("inlineCode",{parentName:"li"},"-- --port [new port number]")),Object(o.b)("li",{parentName:"ul"},"To stop the automatic reload every time a resource changes add ",Object(o.b)("inlineCode",{parentName:"li"},"-- --live-reload false")),Object(o.b)("li",{parentName:"ul"},"To do both the above use ",Object(o.b)("inlineCode",{parentName:"li"},"-- --live-reload false --port [new port number]")))),Object(o.b)("li",{parentName:"ol"},"Navigate to ",Object(o.b)("inlineCode",{parentName:"li"},"https://localhost:4200/"),". The credentials to log in will be dependent on the Jetstream the console points at. Please refer\nto the guides used when setting up the backend for more information")),Object(o.b)("h2",{id:"build"},"Build"),Object(o.b)("p",null,"Run ",Object(o.b)("inlineCode",{parentName:"p"},"npm run build")," to build the project."),Object(o.b)("p",null,"The build artefacts will be stored in the ",Object(o.b)("inlineCode",{parentName:"p"},"dist/")," directory. This will output a production build of the application."),Object(o.b)("h2",{id:"creating-angular-items-via-angular-cli"},"Creating angular items via angular cli"),Object(o.b)("p",null,"To create a new angular component run ",Object(o.b)("inlineCode",{parentName:"p"},"ng generate component component-name"),". You can use a similar command to create other types of angular\nitems ",Object(o.b)("inlineCode",{parentName:"p"},"ng generate <directive|pipe|service|class|guard|interface|enum|module> <name>"),"."),Object(o.b)("h2",{id:"theming"},"Theming"),Object(o.b)("p",null,"We use the angular material theming mechanism. See ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://material.angular.io/guide/theming-your-components"}),"here")," for more information about theming new components added to stratos."))}d.isMDXComponent=!0},139:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),d=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=d(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),s=d(n),u=a,m=s["".concat(i,".").concat(u)]||s[u]||b[u]||o;return n?r.a.createElement(m,l(l({ref:t},p),{},{components:n})):r.a.createElement(m,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);